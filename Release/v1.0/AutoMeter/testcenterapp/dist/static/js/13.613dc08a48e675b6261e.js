webpackJsonp([13],{DkJU:function(e,t,i){"use strict";t.e=function(e){return Object(n.a)({url:"/testscene/search",method:"post",data:e})},t.a=function(e){return Object(n.a)({url:"/testscene",method:"post",data:e})},t.f=function(e){return Object(n.a)({url:"/testscene/detail",method:"put",data:e})},t.b=function(e){return Object(n.a)({url:"/testscene/copyscene",method:"post",data:e})},t.c=function(e){return Object(n.a)({url:"/testscene/scenes",method:"get",params:e})},t.d=function(e){return Object(n.a)({url:"/testscene/"+e,method:"delete"})};var n=i("vLgD")},"j7l/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Xxa5"),a=i.n(n),s=i("exGp"),o=i.n(s),c=i("Dd8w"),l=i.n(c),d=i("2d0t"),r=i("W+bg"),p=i("XcM5"),u=i("W5b6"),m=i("NXqa"),h=i("vuyV"),g=i("0xDb"),f=i("W/rB"),b=i("L6vm"),v=i("CS7w"),y=i("NYxO"),x=i("DkJU"),L=i("nzYI"),_=i("vLgD");var w=i("k8Cg"),S=i("0qgb"),k=i("jO+8"),$={name:"测试集合",filters:{statusFilter:function(e){return{published:"success",draft:"gray",deleted:"danger"}[e]}},data:function(){return{id:null,datevisible:!1,timevisible:!1,itemKey:null,itemplanKey:null,itemcaseKey:null,planbusinessdiclist:[],tmpexecuteplanname:"",tmpcasedeployunitname:null,tmpcaseapiname:null,tmpcaseexecuteplanid:null,tmpcasecasetype:null,show:!1,PerformanceVisible:!1,enviromentnameList:[],apiList:[],deployunitList:[],multipleSelection:[],casemultipleSelection:[],globalheaderallList:[],executeplanList:[],testcaseList:[],testcaselastList:[],executeplancaseList:[],executeplancaseexistList:[],executeplancaseremovetList:[],executeplanstopList:[],tmpplanbatchList:[],paramsList:[],addtestscenelastList:[],testplansceneList:[],testsceneList:[],addtestsceneList:[],apiconditioncaseList:[],sceneconditioncaseList:[],apiconditionmodelList:[],sceneconditionmodelList:[],apiconditionapiList:[],sceneconditionapiList:[],itemaddsceneKey:null,scenemultipleSelection:[],delayconditionList:[],stopplanbatchList:[],tmptestscenename:null,scenetotal:0,addscenetotal:0,testplanscenetotal:0,SceneapiconditiontextMap:{update:"修改前置接口",add:"添加前置接口"},DelaytextMap:{update:"修改延时条件",add:"添加延时条件"},addsearchscene:{page:1,size:10,casetype:null,projectid:""},searchscene:{page:1,size:10,testplanid:0,projectid:""},listLoading:!1,caselistLoading:!1,total:0,casetotal:0,apiQuery:{page:1,size:10,deployunitname:""},listQuery:{page:1,size:10,listLoading:!0,executeplanname:"",projectid:"",creator:""},caselistQuery:{page:1,size:10,listLoading:!0,deployunitname:null,apiname:null,executeplanid:null,casetype:null},ParamsdialogStatus:"add",DelaydialogStatus:"add",dialogStatus:"add",SceneconditiondialogStatus:"add",dialogFormVisible:!1,casedialogFormVisible:!1,batchdialogFormVisible:!1,CollectionParamsFormVisible:!1,modifyparamdialogFormVisible:!1,ConditionFormVisible:!1,testscenedialogFormVisible:!1,addtestscenedialogFormVisible:!1,scenecaseConditionFormVisible:!1,SceneconditiondialogFormVisible:!1,DelaydialogFormVisible:!1,stopbatchdialogFormVisible:!1,loadcase:"装载用例",loadbatch:"执行计划",textMap:{updateRole:"修改测试集合",update:"修改测试集合",add:"添加测试集合"},apiconditiontextMap:{update:"修改前置接口",add:"添加前置接口"},apiconditiondialogStatus:"add",caseconditiondialogFormVisible:!1,tmpapicondition:{page:1,size:10,id:"",modelid:0,modelname:"",conditionid:"",subconditionname:"",conditionname:"",deployunitid:"",deployunitname:"",apiname:"",apiid:"",caseid:"",casename:"",memo:"",conditiontype:"",creator:"",projectid:""},tmpsceneapicondition:{page:1,size:10,id:"",modelid:0,modelname:"",conditionid:"",subconditionname:"",conditionname:"",deployunitid:"",deployunitname:"",apiname:"",apiid:"",caseid:"",casename:"",memo:"",conditiontype:"",creator:"",projectid:""},tmpdelaycondition:{id:"",subconditionname:"",conditionid:"",conditionname:"",conditiontype:"",delaytime:"",creator:"",projectid:""},paramstextMap:{updateRole:"修改参数",update:"修改参数",add:"添加参数"},diclevelQuery:{page:1,size:100,diccode:"planbusinesstype"},btnLoading:!1,casebtnLoading:!1,execbtnLoading:!1,tmpexecuteplan:{id:"",executeplanname:"",enviromentname:"",envid:"",status:"",usetype:"",businesstype:"",ip:"",memo:"",creator:"",dingdingtoken:"",runmode:"",projectid:""},tmpplanbatch:{executeplanid:"",executeplanname:"",batchid:"",batchname:"",creator:"",exectype:"",exectmpdate:"",execdate:"",exectime:"",projectid:""},tmpstopplanbatch:{executeplanid:"",batchid:"",batchname:"",projectid:""},tmpplanenv:{id:"",envid:"",projectid:"",enviromentname:""},tmpapicases:{id:"",casename:"",deployunitname:"",apiname:"",casejmxname:"",casecontent:"",expect:"",level:"",memo:"",creator:"admin"},tmpparam:{id:"",executeplanid:"",paramstype:"",keyname:"",keyvalue:"",globalheadername:"",globalheaderid:0},tmpep:{executeplanid:""},search:{page:1,size:10,executeplanname:null,businesstype:"",creator:"",projectid:""},Scenedelaysearch:{conditionid:null,conditiontype:null,projectid:null},searchcase:{page:1,size:10,deployunitname:null,apiname:null,executeplanid:null,casetype:null,projectid:""},searchparam:{page:1,size:10},searchapicondition:{page:1,size:10,conditionid:"",conditiontype:"",projectid:""},tmpexecplan:{execplanid:0,execplanname:null}}},computed:l()({},Object(y.b)(["name","sidebar","projectlist","projectid"])),created:function(){this.search.projectid=window.localStorage.getItem("pid"),this.tmpplanbatch.projectid=window.localStorage.getItem("pid"),this.tmpplanenv.projectid=window.localStorage.getItem("pid"),this.listQuery.projectid=window.localStorage.getItem("pid"),this.addsearchscene.projectid=window.localStorage.getItem("pid"),this.searchapicondition.projectid=window.localStorage.getItem("pid"),this.Scenedelaysearch.projectid=window.localStorage.getItem("pid"),this.tmpstopplanbatch.projectid=window.localStorage.getItem("pid"),this.getexecuteplanList(),this.getdepunitList(),this.getenviromentallList(),this.getdatabydiccodeList(),this.getglobalheaderallList()},activated:function(){this.getdepunitList(),this.getenviromentallList(),this.getdatabydiccodeList(),this.getglobalheaderallList()},methods:{getstopplanbatchList:function(){var e=this;Object(u.b)(this.tmpstopplanbatch).then(function(t){e.stopplanbatchList=t.data}).catch(function(t){e.$message.error("加载停止计划列表失败")})},getdelayconditionList:function(){var e=this;this.Scenedelaysearch.conditiontype="scene",Object(k.d)(this.Scenedelaysearch).then(function(t){e.delayconditionList=t.data}).catch(function(t){e.$message.error("加载测试延时条件列表失败")})},showUpdatedelayconditionDialog:function(e){this.DelaydialogFormVisible=!0,this.DelaydialogStatus="update",this.tmpdelaycondition.id=this.delayconditionList[e].id,this.tmpdelaycondition.subconditionname=this.delayconditionList[e].subconditionname,this.tmpdelaycondition.delaytime=this.delayconditionList[e].delaytime,this.tmpdelaycondition.creator=this.name},removedelaycondition:function(e){var t=this;this.$confirm("删除该延时条件？","警告",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var i=t.delayconditionList[e].id;Object(k.b)(i).then(function(){t.$message.success("删除成功"),t.getdelayconditionList()})}).catch(function(){t.$message.info("已取消删除")})},updatebatchstatus:function(e){var t=this;this.$confirm("确认停止该执行计划？","警告",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){Object(u.d)(t.tmpstopplanbatch).then(function(){t.$message.success("停止成功"),t.stopbatchdialogFormVisible=!1,t.getdelayconditionList()})}).catch(function(){t.$message.info("已取消停止")})},updatedelaycondition:function(){var e=this;this.$refs.tmpdelaycondition.validate(function(t){t&&Object(k.e)(e.tmpdelaycondition).then(function(){e.$message.success("更新成功"),e.getdelayconditionList(),e.DelaydialogFormVisible=!1}).catch(function(t){e.$message.error("更新失败")})})},adddelaycondition:function(){var e=this;this.$refs.tmpdelaycondition.validate(function(t){t&&Object(k.a)(e.tmpdelaycondition).then(function(){e.$message.success("添加成功"),e.getdelayconditionList(),e.DelaydialogFormVisible=!1}).catch(function(t){e.$message.error("添加失败")})})},showAddScenedelayconditionDialog:function(){this.DelaydialogFormVisible=!0,this.DelaydialogStatus="add",this.tmpdelaycondition.id="",this.tmpdelaycondition.subconditionname="",this.tmpdelaycondition.conditionid=this.tmpsceneapicondition.conditionid,this.tmpdelaycondition.conditionname=this.tmpsceneapicondition.conditionname,this.tmpdelaycondition.conditiontype="scene",this.tmpdelaycondition.delaytime="",this.tmpdelaycondition.creator=this.name,this.tmpdelaycondition.projectid=window.localStorage.getItem("pid")},showtestscenecaseConditionDialog:function(e){this.scenecaseConditionFormVisible=!0,this.tmpsceneapicondition.conditionid=this.testplansceneList[e].id,this.tmpsceneapicondition.conditionname=this.testplansceneList[e].scenename,this.tmpsceneapicondition.conditiontype="scence",this.searchapicondition.conditiontype="scence",this.searchapicondition.conditionid=this.testplansceneList[e].id,this.Scenedelaysearch.conditionid=this.testplansceneList[e].id,this.getapiconditionList(),this.getdelayconditionList()},removetestplanscene:function(e){var t=this;this.$confirm("删除该测试场景？","警告",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var i,n=t.testplansceneList[e].id;(i=n,Object(_.a)({url:"/testplan/testscene/"+i,method:"delete"})).then(function(){t.$message.success("删除成功"),t.findscenebyexecplanid()})}).catch(function(){t.$message.info("已取消删除")})},showUpdateapiconditionDialog:function(e){this.caseconditiondialogFormVisible=!0,this.apiconditiondialogStatus="update",this.tmpapicondition.id=this.apiconditioncaseList[e].id,this.tmpapicondition.subconditionname=this.apiconditioncaseList[e].subconditionname,this.tmpapicondition.deployunitname=this.apiconditioncaseList[e].deployunitname,this.tmpapicondition.apiname=this.apiconditioncaseList[e].apiname,this.tmpapicondition.casename=this.apiconditioncaseList[e].casename,this.tmpapicondition.modelname=this.apiconditioncaseList[e].modelname,this.tmpapicondition.memo=this.apiconditioncaseList[e].memo,this.tmpapicondition.creator=this.name,this.tmpapicondition.projectid=window.localStorage.getItem("pid")},showUpdatesceneconditionDialog:function(e){this.SceneconditiondialogFormVisible=!0,this.SceneconditiondialogStatus="update",this.tmpsceneapicondition.id=this.apiconditioncaseList[e].id,this.tmpsceneapicondition.subconditionname=this.apiconditioncaseList[e].subconditionname,this.tmpsceneapicondition.deployunitname=this.apiconditioncaseList[e].deployunitname,this.tmpsceneapicondition.apiname=this.apiconditioncaseList[e].apiname,this.tmpsceneapicondition.casename=this.apiconditioncaseList[e].casename,this.tmpsceneapicondition.modelname=this.apiconditioncaseList[e].modelname,this.tmpsceneapicondition.memo=this.apiconditioncaseList[e].memo,this.tmpsceneapicondition.creator=this.name,this.tmpsceneapicondition.projectid=window.localStorage.getItem("pid")},updateapicondition:function(){var e=this;this.$refs.tmpapicondition.validate(function(t){t&&Object(S.d)(e.tmpapicondition).then(function(){e.$message.success("更新成功"),e.getapiconditionList(),e.caseconditiondialogFormVisible=!1}).catch(function(t){e.$message.error("更新失败")})})},updatescenecondition:function(){var e=this;this.$refs.tmpsceneapicondition.validate(function(t){t&&Object(S.d)(e.tmpsceneapicondition).then(function(){e.$message.success("更新成功"),e.getapiconditionList(),e.SceneconditiondialogFormVisible=!1}).catch(function(t){e.$message.error("更新失败")})})},removecasescenecondition:function(e){var t=this;this.$confirm("删除该前置条件？","警告",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var i=t.apiconditioncaseList[e].id;Object(S.b)(i).then(function(){t.$message.success("删除成功"),t.getapiconditionList()})}).catch(function(){t.$message.info("已取消删除")})},removecaseapicondition:function(e){var t=this;this.$confirm("删除该前置条件？","警告",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var i=t.apiconditioncaseList[e].id;Object(S.b)(i).then(function(){t.$message.success("删除成功"),t.getapiconditionList()})}).catch(function(){t.$message.info("已取消删除")})},apiconditiontestcaseselectChanged:function(e){for(var t=0;t<this.apiconditioncaseList.length;t++)this.apiconditioncaseList[t].casename===e&&(this.tmpapicondition.caseid=this.apiconditioncaseList[t].id)},sceneconditiontestcaseselectChanged:function(e){for(var t=0;t<this.sceneconditioncaseList.length;t++)this.sceneconditioncaseList[t].casename===e&&(this.tmpsceneapicondition.caseid=this.sceneconditioncaseList[t].id)},sceneconditionmodelselectChanged:function(e){var t=this;this.tmpsceneapicondition.apiname=null,this.tmpsceneapicondition.casename=null;for(var i=0;i<this.sceneconditionmodelList.length;i++)this.sceneconditionmodelList[i].modelname===e&&(this.tmpsceneapicondition.modelid=this.sceneconditionmodelList[i].id);""===e&&(this.tmpsceneapicondition.modelid=0,this.tmpsceneapicondition.modelname=""),Object(r.d)(this.tmpsceneapicondition).then(function(e){t.sceneconditionapiList=e.data}).catch(function(e){t.$message.error("加载api列表失败")})},apiconditionmodelselectChanged:function(e){var t=this;this.tmpapicondition.apiname=null,this.tmpapicondition.casename=null;for(var i=0;i<this.apiconditionmodelList.length;i++)this.apiconditionmodelList[i].modelname===e&&(this.tmpapicondition.modelid=this.apiconditionmodelList[i].id);""===e&&(this.tmpapicondition.modelid=0,this.tmpapicondition.modelname=""),Object(r.d)(this.tmpapicondition).then(function(e){t.apiconditionapiList=e.data}).catch(function(e){t.$message.error("加载api列表失败")})},apiconditionapiselectChanged:function(e){var t=this;this.tmpapicondition.casename=null;for(var i=0;i<this.apiconditionapiList.length;i++)this.apiconditionapiList[i].apiname===e&&(this.tmpapicondition.apiid=this.apiconditionapiList[i].id);Object(d.d)(this.tmpapicondition).then(function(e){t.apiconditioncaseList=e.data}).catch(function(e){t.$message.error("加载apicase列表失败")})},sceneconditionapiselectChanged:function(e){var t=this;this.tmpsceneapicondition.casename=null;for(var i=0;i<this.sceneconditionapiList.length;i++)this.sceneconditionapiList[i].apiname===e&&(this.tmpsceneapicondition.apiid=this.sceneconditionapiList[i].id);Object(d.d)(this.tmpsceneapicondition).then(function(e){t.sceneconditioncaseList=e.data}).catch(function(e){t.$message.error("加载apicase列表失败")})},showtestplanConditionDialog:function(e){this.ConditionFormVisible=!0,this.searchapicondition.conditiontype="execplan",this.searchapicondition.conditionid=this.executeplanList[e].id,this.tmpapicondition.conditionid=this.executeplanList[e].id,this.tmpapicondition.conditionname=this.executeplanList[e].executeplanname,this.tmpapicondition.conditiontype="execplan",this.getapiconditionList()},apiconditioncaseIndex:function(e){return(this.searchapicondition.page-1)*this.searchapicondition.size+e+1},getapiconditionList:function(){var e=this;Object(S.c)(this.searchapicondition).then(function(t){e.apiconditioncaseList=t.data.list}).catch(function(t){e.$message.error("加载测试接口条件列表失败")})},addscenecondition:function(){var e=this;this.$refs.tmpsceneapicondition.validate(function(t){t&&Object(S.a)(e.tmpsceneapicondition).then(function(){e.$message.success("添加成功"),e.SceneconditiondialogFormVisible=!1,e.getapiconditionList()}).catch(function(t){e.$message.error("添加失败"),e.btnLoading=!1})})},addapicondition:function(){var e=this;this.$refs.tmpapicondition.validate(function(t){t&&Object(S.a)(e.tmpapicondition).then(function(){e.$message.success("添加成功"),e.caseconditiondialogFormVisible=!1,e.getapiconditionList()}).catch(function(t){e.$message.error("添加失败"),e.btnLoading=!1})})},sceneconditiondeployunitselectChanged:function(e){var t=this;this.tmpsceneapicondition.casename=null,this.tmpsceneapicondition.apiname=null,this.tmpsceneapicondition.modelname=null;for(var i=0;i<this.deployunitList.length;i++)this.deployunitList[i].deployunitname===e&&(this.tmpsceneapicondition.deployunitid=this.deployunitList[i].id);Object(w.c)(this.tmpsceneapicondition).then(function(e){t.sceneconditionmodelList=e.data.list}).catch(function(e){t.$message.error("加载服务模块列表失败")}),this.sceneconditionapiList=null,Object(r.d)(this.tmpsceneapicondition).then(function(e){t.sceneconditionapiList=e.data}).catch(function(e){t.$message.error("加载api列表失败")})},apiconditiondeployunitselectChanged:function(e){var t=this;this.tmpapicondition.casename=null,this.tmpapicondition.apiname=null,this.tmpapicondition.modelname=null;for(var i=0;i<this.deployunitList.length;i++)this.deployunitList[i].deployunitname===e&&(this.tmpapicondition.deployunitid=this.deployunitList[i].id);Object(w.c)(this.tmpapicondition).then(function(e){t.apiconditionmodelList=e.data.list}).catch(function(e){t.$message.error("加载服务模块列表失败")}),this.apiconditionapiList=null,Object(r.d)(this.tmpapicondition).then(function(e){t.apiconditionapiList=e.data}).catch(function(e){t.$message.error("加载api列表失败")})},cancelEdit:function(e){e.ordernum=e.oldcaseorder,e.edit=!1},confirmEdit:function(e){var t,i=this;e.edit=!1,(t=e,Object(_.a)({url:"/testplan/testscene/updateplanscenenorder",method:"post",data:t})).then(function(t){e.oldcaseorder=e.ordernum,i.$message.success("修改顺序成功")}).catch(function(t){e.ordernum=e.oldcaseorder,i.$message.error("修改顺序失败")})},findscenebyexecplanid:function(){var e,t=this;(e=this.searchscene,Object(_.a)({url:"/testplan/testscene/findscenebyexecplanid",method:"post",data:e})).then(function(e){t.testplansceneList=e.data.list;var i=e.data.list;t.testplansceneList=i.map(function(e){return t.$set(e,"edit",!1),e.oldcaseorder=e.ordernum,e}),t.testplanscenetotal=e.data.total}).catch(function(e){t.$message.error("加载场景用例列表失败")})},addscenehandleClickTableRow:function(e,t,i){},addscenehandleSelectionChange:function(e){this.scenemultipleSelection=e},addscenehandleCurrentChange:function(e){this.addsearchscene.page=e,this.gettestsceneList()},planscenehandleCurrentChange:function(e){this.searchscene.page=e,this.findscenebyexecplanid()},addscenegetIndex:function(e){return(this.addsearchscene.page-1)*this.addsearchscene.size+e+1},gettestsceneList:function(){var e=this;this.addsearchscene.scenename=this.tmptestscenename,Object(x.e)(this.addsearchscene).then(function(t){e.testsceneList=t.data.list,e.addscenetotal=t.data.total}).catch(function(t){e.$message.error("加载场景列表失败")})},addscenehandleSizeChange:function(e){this.addsearchscene.page=1,this.addsearchscene.size=e,this.gettestsceneList()},planscenehandleSizeChange:function(e){this.searchscene.page=1,this.searchscene.size=e,this.findscenebyexecplanid()},getdatabydiccodeList:function(){var e=this;Object(b.b)(this.diclevelQuery).then(function(t){e.planbusinessdiclist=t.data.list}).catch(function(t){e.$message.error("加载组件名字典列表失败")})},unix2CurrentTime:g.b,getglobalheaderallList:function(){var e=this;Object(v.b)(this.search).then(function(t){e.globalheaderallList=t.data}).catch(function(t){e.$message.error("加载全局Header列表失败")})},searchheaderbyepid:function(){var e=this;console.log(this.tmpep),Object(L.e)(this.tmpep).then(function(t){e.paramsList=t.data.list}).catch(function(t){e.$message.error("加载header列表失败")})},stopexecuteplanList:function(){for(var e=this,t=0;t<this.multipleSelection.length;t++)"waiting"!==this.multipleSelection[t].status&&"new"!==this.multipleSelection[t].status&&"finish"!==this.multipleSelection[t].status&&"stop"!==this.multipleSelection[t].status||this.multipleSelection.splice(t);if(0===this.multipleSelection.length)this.$message.error("未选择执行计划,或者只有运行中才可以停止");else{for(var i=0;i<this.multipleSelection.length;i++)this.executeplanstopList.push({id:this.multipleSelection[i].id,status:"stop"});Object(h.k)(this.executeplanstopList).then(function(){e.$message.success("已停止执行计划"),e.btnLoading=!1}).catch(function(t){e.$message.error("停止计划执行失败"),e.btnLoading=!1})}this.getexecuteplanList()},savebatchandexecuteplancase:function(){var e=this;this.$refs.tmpplanbatch.validate(function(t){if(t){if(0===e.multipleSelection.length)return void e.$message.error("未选择执行计划,或者所选计划已经在执行中");if(e.multipleSelection.length>1)return void e.$message.error("不支持多执行计划一起提交，单个提交");e.tmpplanbatch.executeplanname=e.multipleSelection[0].executeplanname,e.tmpplanbatch.execdate=e.tmpplanbatch.exectmpdate+" "+e.tmpplanbatch.exectime+":00",":00"===e.tmpplanbatch.execdate&&(e.tmpplanbatch.execdate="/"),""===e.tmpplanbatch.exectmpdate&&(e.tmpplanbatch.execdate=e.tmpplanbatch.exectime+":00"),e.executeplancase(),e.batchdialogFormVisible=!1}})},executeplancase:function(){var e=this;this.tmpplanbatchList=[],this.$refs.tmpplanbatch.validate(function(t){if(t){for(var i=0;i<e.multipleSelection.length;i++)"running"===e.multipleSelection[i].status&&e.multipleSelection.splice(i);if(0===e.multipleSelection.length)e.$message.error("未选择执行计划,或者所选计划已经在执行中");else if(e.multipleSelection.length>1)e.$message.error("不支持多执行计划一起提交，单个提交");else{for(var n=0;n<e.multipleSelection.length;n++)e.tmpplanbatchList.push({executeplanname:e.tmpplanbatch.executeplanname,batchname:e.tmpplanbatch.batchname,exectype:e.tmpplanbatch.exectype,execdate:e.tmpplanbatch.execdate,creator:e.name,projectid:e.tmpplanbatch.projectid,exectime:e.tmpplanbatch.exectime,executeplanid:e.tmpplanbatch.executeplanid,exectmpdate:e.tmpplanbatch.exectmpdate});Object(h.c)(e.tmpplanbatchList).then(function(){e.$message.success("测试集合已经提交，即将开始执行")}).catch(function(t){e.$message.error("执行测试集合失败")})}e.getexecuteplanList()}})},handleClickTableRow:function(e,t,i){},handleSelectionChange:function(e){this.multipleSelection=e,console.log("00000000000000000000000000"),console.log(this.multipleSelection)},casehandleClickTableRow:function(e,t,i){console.log(e)},casehandleSelectionChange:function(e){this.casemultipleSelection=e},exectypeselectChanged:function(e){"立即执行"===e&&(this.datevisible=!1,this.timevisible=!1),"某天定时"===e&&(this.datevisible=!0,this.timevisible=!0,this.tmpplanbatch.execdate="",this.tmpplanbatch.exectime=""),"每天定时"===e&&(this.datevisible=!1,this.timevisible=!0,this.tmpplanbatch.exectime="")},paramstypeselectChanged:function(e){this.tmpparam.keyname="",this.tmpparam.keyvalue=""},getexecuteplanList:function(){var e=this;this.search.execplanname=this.tmpexecplanname,this.search.batchname=this.tmpbatchname,this.search.creator=this.name,this.listLoading=!0,Object(h.i)(this.search).then(function(t){e.executeplanList=t.data.list,e.total=t.data.total,e.listLoading=!1}).catch(function(t){e.$message.error("加载字典列表失败")})},searchBy:function(){var e=this;this.search.page=1,this.listLoading=!0,Object(h.i)(this.search).then(function(t){e.itemKey=Math.random(),e.executeplanList=t.data.list,e.total=t.data.total}).catch(function(t){e.$message.error("搜索失败")}),this.tmpexecuteplanname=this.search.executeplanname,this.listLoading=!1,this.btnLoading=!1},handleSizeChange:function(e){this.search.page=1,this.search.size=e,this.getexecuteplanList()},handleCurrentChange:function(e){this.search.page=e,this.getexecuteplanList()},getIndex:function(e){return(this.search.page-1)*this.search.size+e+1},paramgetIndex:function(e){return(this.searchparam.page-1)*this.searchparam.size+e+1},planscenegetIndex:function(e){return(this.searchscene.page-1)*this.searchscene.size+e+1},enviromentselectChanged:function(e){for(var t=0;t<this.enviromentnameList.length;t++)this.enviromentnameList[t].enviromentname===e&&(this.tmpexecuteplan.envid=this.enviromentnameList[t].id),console.log(this.enviromentnameList[t].id)},selectChanged:function(e){var t=this;this.apiList=null,this.apiQuery.deployunitname=e,Object(r.j)(this.apiQuery).then(function(e){t.apiList=e.data.list}).catch(function(e){t.$message.error("加载api列表失败")})},getapiList:function(){var e=this;this.caselistLoading=!0,this.listQuery.creator=this.name,Object(r.j)(this.listQuery).then(function(t){e.apiList=t.data.list,e.caselistLoading=!1}).catch(function(t){e.$message.error("加载api列表失败")})},getenviromentallList:function(){var e=this;Object(f.c)(this.search).then(function(t){e.enviromentnameList=t.data}).catch(function(t){e.$message.error("加载环境列表失败")})},getdepunitList:function(){var e=this;this.caselistLoading=!0,Object(p.e)(this.listQuery).then(function(t){e.deployunitList=t.data}).catch(function(t){e.$message.error("加载微服务列表失败")})},getcaseList:function(){var e=this;this.caselistLoading=!0,Object(d.e)(this.listQuery).then(function(t){e.apicasesList=t.data.list,e.caselistLoading=!1}).catch(function(t){e.$message.error("加载用例列表失败")})},searchcaseBy:function(){this.searchtestplanexistcase()},gettestcaselastList:function(){var e=this;return o()(a.a.mark(function t(){var i,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(console.log(e.testcaseList.length),console.log(e.executeplancaseexistList.length),i=0;i<e.testcaseList.length;i++)for(n=0;n<e.executeplancaseexistList.length;n++)e.testcaseList[i].id===e.executeplancaseexistList[n].testcaseid?e.testcaselastList.push({checkstats:!0,deployunitname:e.testcaseList[i].deployunitname,apiname:e.testcaseList[i].apiname,casename:e.testcaseList[i].casename,expect:e.testcaseList[i].expect}):e.testcaselastList.push({checkstats:!1,deployunitname:e.testcaseList[i].deployunitname,apiname:e.testcaseList[i].apiname,casename:e.testcaseList[i].casename,expect:e.testcaseList[i].expect});console.log(e.testcaselastList);case 4:case"end":return t.stop()}},t,e)}))()},searchcaseBydepandapi:function(){var e=this;return o()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.searchcase.validate(function(t){t&&(e.casebtnLoading=!0,e.caselistLoading=!0,e.searchcase.page=e.caselistQuery.page,e.searchcase.size=e.caselistQuery.size,Object(d.m)(e.searchcase).then(function(t){e.testcaseList=t.data.list,console.log(e.testcaseList.length),e.casetotal=t.data.total}).catch(function(t){e.$message.error("搜索失败")}),e.caselistLoading=!1,e.casebtnLoading=!1)});case 1:case"end":return t.stop()}},t,e)}))()},searchtestplanexistcase:function(){var e=this;this.testcaselastList=[],this.$refs.searchcase.validate(function(t){t&&(e.searchcase.executeplanid=e.tmpexecuteplan.id,e.searchcase.casetype=e.tmpexecuteplan.usetype,e.searchcase.page=1,Object(m.g)(e.searchcase).then(function(t){e.testcaselastList=t.data.list,e.casetotal=t.data.total,e.$nextTick(function(){for(var t=0;t<e.testcaselastList.length;t++)!0===e.testcaselastList[t].status&&e.$refs.caseTable.toggleRowSelection(e.testcaselastList[t],!0)})}).catch(function(t){e.$message.error("获取已装载的用例失败")}))}),this.tmpcasedeployunitname=this.searchcase.deployunitname,this.tmpcaseapiname=this.searchcase.apiname,this.tmpcaseexecuteplanid=this.searchcase.executeplanid,this.tmpcasecasetype=this.searchcase.casetype},casehandleSizeChange:function(e){this.searchcase.page=1,this.searchcase.size=e,this.searchtestplanexistcase()},casehandleCurrentChange:function(e){this.searchcase.page=e,this.searchtestplanexistcase()},casegetIndex:function(e){return(this.searchcase.page-1)*this.searchcase.size+e+1},showAddexecuteplanDialog:function(){this.dialogFormVisible=!0,this.dialogStatus="add",this.tmpexecuteplan.id="",this.tmpexecuteplan.executeplanname="",this.tmpexecuteplan.status="new",this.tmpexecuteplan.memo="",this.tmpexecuteplan.usetype="",this.tmpexecuteplan.enviromentname="",this.tmpexecuteplan.businesstype="",this.tmpexecuteplan.creator=this.name,this.tmpexecuteplan.runmode="",this.tmpexecuteplan.dingdingtoken="",this.tmpexecuteplan.projectid=window.localStorage.getItem("pid")},showplanparamsDialog:function(e){this.CollectionParamsFormVisible=!0,this.tmpparam.executeplanid=this.executeplanList[e].id,this.tmpep.executeplanid=this.executeplanList[e].id,this.searchheaderbyepid()},showstopbatchDialog:function(e){this.stopbatchdialogFormVisible=!0,this.tmpstopplanbatch.batchname="",this.tmpstopplanbatch.executeplanid=this.executeplanList[e].id,this.getstopplanbatchList()},showtestsceneDialog:function(e){this.testscenedialogFormVisible=!0,this.tmpexecplan.execplanid=this.executeplanList[e].id,this.tmpexecplan.execplanname=this.executeplanList[e].executeplanname,this.searchscene.testplanid=this.executeplanList[e].id,this.findscenebyexecplanid()},ShowAddScenceDialog:function(e){this.addtestscenedialogFormVisible=!0,this.gettestsceneList()},ShowAddPlancaseconditionDialog:function(e){this.caseconditiondialogFormVisible=!0,this.apiconditiondialogStatus="add",this.tmpapicondition.id="",this.tmpapicondition.subconditionname="",this.tmpapicondition.deployunitname="",this.tmpapicondition.apiname="",this.tmpapicondition.modelname="",this.tmpapicondition.casename="",this.tmpapicondition.memo="",this.tmpapicondition.creator=this.name,this.tmpapicondition.projectid=window.localStorage.getItem("pid")},ShowAddPlanSceneconditionDialog:function(e){this.SceneconditiondialogFormVisible=!0,this.SceneconditiondialogStatus="add",this.tmpsceneapicondition.id="",this.tmpsceneapicondition.subconditionname="",this.tmpsceneapicondition.deployunitname="",this.tmpsceneapicondition.apiname="",this.tmpsceneapicondition.modelname="",this.tmpsceneapicondition.casename="",this.tmpsceneapicondition.memo="",this.tmpsceneapicondition.creator=this.name,this.tmpsceneapicondition.projectid=window.localStorage.getItem("pid")},showAddapiparamsDialog:function(){this.modifyparamdialogFormVisible=!0,this.ParamsdialogStatus="add",this.tmpparam.id="",this.tmpparam.globalheaderid="",this.tmpparam.globalheadername=""},showUpdateparamsDialog:function(e){this.modifyparamdialogFormVisible=!0,this.ParamsdialogStatus="update",this.tmpparam.id=this.paramsList[e].id,this.tmpparam.globalheadername=this.paramsList[e].globalheadername},showplanbatchDialog:function(){var e=this;this.tmpplanbatch.exectmpdate="",this.tmpplanbatch.exectime="",this.tmpplanbatch.execdate="",this.tmpplanbatch.exectype="",this.timevisible=!1,this.datevisible=!1;for(var t=0;t<this.multipleSelection.length;t++)"running"===this.multipleSelection[t].status&&this.multipleSelection.splice(t);0===this.multipleSelection.length?this.$message.error("未选择执行计划,或者所选计划已经在执行中"):this.multipleSelection.length>1?this.$message.error("不支持多执行计划一起提交，单个提交"):(this.tmpplanenv.id=this.multipleSelection[0].id,this.tmpplanenv.envid=this.multipleSelection[0].envid,this.tmpplanenv.enviromentname=this.multipleSelection[0].enviromentname,Object(h.b)(this.tmpplanenv).then(function(){e.batchdialogFormVisible=!0,e.tmpplanbatch.executeplanid=e.multipleSelection[0].id,e.tmpplanbatch.creator=e.name,e.tmpplanbatch.batchname=""}).catch(function(e){}))},addexecuteplan:function(){var e=this;this.$refs.tmpexecuteplan.validate(function(t){t&&(e.btnLoading=!0,Object(h.a)(e.tmpexecuteplan).then(function(){e.$message.success("添加成功"),e.getexecuteplanList(),e.dialogFormVisible=!1,e.btnLoading=!1}).catch(function(t){e.$message.error("添加失败"),e.btnLoading=!1}))})},addparams:function(){var e=this;this.$refs.tmpparam.validate(function(t){t&&Object(L.a)(e.tmpparam).then(function(){e.$message.success("添加成功"),e.modifyparamdialogFormVisible=!1,e.searchheaderbyepid()}).catch(function(t){e.$message.error("添加失败")})})},updatparam:function(){var e=this;this.$refs.tmpparam.validate(function(t){t&&Object(L.h)(e.tmpparam).then(function(){e.$message.success("更新成功"),e.searchheaderbyepid(),e.modifyparamdialogFormVisible=!1}).catch(function(t){e.$message.error("添加失败")})})},removeexecuteplanparam:function(e){var t=this;this.$confirm("删除该参数？","警告",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var i=t.paramsList[e].id;Object(L.d)(i).then(function(){t.$message.success("删除成功"),t.searchheaderbyepid()})}).catch(function(){t.$message.info("已取消删除")})},showUpdateexecuteplanDialog:function(e){this.dialogFormVisible=!0,this.dialogStatus="update",this.tmpexecuteplan.id=this.executeplanList[e].id,this.tmpexecuteplan.executeplanname=this.executeplanList[e].executeplanname,this.tmpexecuteplan.status=this.executeplanList[e].status,this.tmpexecuteplan.usetype=this.executeplanList[e].usetype,this.tmpexecuteplan.memo=this.executeplanList[e].memo,this.tmpexecuteplan.enviromentname=this.executeplanList[e].enviromentname,this.tmpexecuteplan.businesstype=this.executeplanList[e].businesstype,this.tmpexecuteplan.creator=this.name,this.tmpexecuteplan.runmode=this.executeplanList[e].runmode,this.tmpexecuteplan.dingdingtoken=this.executeplanList[e].dingdingtoken,this.tmpexecuteplan.projectid=window.localStorage.getItem("pid");for(var t=0;t<this.enviromentnameList.length;t++)this.enviromentnameList[t].enviromentname===this.tmpexecuteplan.enviromentname&&(this.tmpexecuteplan.envid=this.enviromentnameList[t].id)},addplantestscene:function(){var e,t=this;if(this.addtestsceneList=[],0===this.scenemultipleSelection.length)this.$message.error("请选择添加的场景");else{for(var i=0;i<this.scenemultipleSelection.length;i++)this.addtestsceneList.push({testscenenid:this.scenemultipleSelection[i].id,scenename:this.scenemultipleSelection[i].scenename,testplanid:this.tmpexecplan.execplanid,planname:this.tmpexecplan.execplanname,ordernum:0,creator:this.name,projectid:window.localStorage.getItem("pid")});(e=this.addtestsceneList,Object(_.a)({url:"/testplan/testscene/addplanscene",method:"post",data:e})).then(function(){t.$message.success("装载成功"),t.addtestscenedialogFormVisible=!1,t.findscenebyexecplanid()}).catch(function(e){t.$message.error("装载失败")})}},addexecuteplantestcase:function(){var e=this;if(this.executeplancaseList=[],0===this.casemultipleSelection.length)this.$message.error("请选择装载的用例");else{for(var t=0;t<this.casemultipleSelection.length;t++)this.executeplancaseList.push({executeplanid:this.tmpexecuteplan.id,deployunitid:this.casemultipleSelection[t].deployunitid,apiid:this.casemultipleSelection[t].apiid,deployunitname:this.casemultipleSelection[t].deployunitname,apiname:this.casemultipleSelection[t].apiname,testcaseid:this.casemultipleSelection[t].id,casename:this.casemultipleSelection[t].casename});Object(m.a)(this.executeplancaseList).then(function(){e.$message.success("装载成功")}).catch(function(t){e.$message.error("装载失败")})}},removeexecuteplantestcase:function(){var e=this;if(this.executeplancaseremovetList=[],this.testcaselastList.length===this.casemultipleSelection.length)this.$message.error("未找到需要取消装载的用例");else{for(var t=0;t<this.testcaselastList.length;t++){for(var i=!1,n=0;n<this.casemultipleSelection.length;n++)if(this.testcaselastList[t].id===this.casemultipleSelection[n].id){i=!0;break}this.testcaselastList[t].id,i||this.executeplancaseremovetList.push({executeplanid:this.tmpexecuteplan.id,deployunitname:this.testcaselastList[t].deployunitname,apiname:this.testcaselastList[t].apiname,testcaseid:this.testcaselastList[t].id,casename:this.testcaselastList[t].casename})}console.log(this.executeplancaseremovetList),Object(m.e)(this.executeplancaseremovetList).then(function(){e.$message.success("取消装载用例成功")}).catch(function(t){e.$message.error("取消装载用例失败")})}},showTestCaseDialog:function(e){this.casedialogFormVisible=!0,this.tmpexecuteplan.id=this.executeplanList[e].id,this.tmpexecuteplan.executeplanname=this.executeplanList[e].executeplanname,this.tmpexecuteplan.status=this.executeplanList[e].status,this.tmpexecuteplan.usetype=this.executeplanList[e].usetype,this.tmpexecuteplan.memo=this.executeplanList[e].memo,this.searchcase.deployunitname=null,this.searchcase.apiname=null,this.testcaselastList=[],this.casetotal=0},updateexecuteplan:function(){var e=this;this.$refs.tmpexecuteplan.validate(function(t){t&&Object(h.j)(e.tmpexecuteplan).then(function(){e.$message.success("更新成功"),e.getexecuteplanList(),e.dialogFormVisible=!1}).catch(function(t){e.$message.error("更新失败"),e.btnLoading=!1})})},removeexecuteplan:function(e){var t=this;this.$confirm("删除该执行计划？","警告",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var i=t.executeplanList[e].id;Object(h.h)(i).then(function(){t.$message.success("删除成功"),t.getexecuteplanList()})}).catch(function(){t.$message.info("已取消删除")})},isUniqueDetail:function(e){for(var t=0;t<this.executeplanList.length;t++)if(this.executeplanList[t].id!==e.id&&this.executeplanList[t].executeplanname===e.executeplanname)return this.$message.error("执行计划名已存在"),!1;return!0},notexistheaderselectChanged:function(e){for(var t=0;t<this.globalheaderallList.length;t++)this.globalheaderallList[t].globalheadername===e&&(this.tmpparam.globalheaderid=this.globalheaderallList[t].id)}}},C={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[e.hasPermission("executeplan:list")?i("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return t.preventDefault(),e.getexecuteplanList(t)}}},[e._v("刷新")]):e._e(),e._v(" "),e.hasPermission("executeplan:list")?i("el-button",{attrs:{type:"success",size:"mini"},nativeOn:{click:function(t){return t.preventDefault(),e.showplanbatchDialog(t)}}},[e._v("运行")]):e._e(),e._v(" "),e.hasPermission("executeplan:add")?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return t.preventDefault(),e.showAddexecuteplanDialog(t)}}},[e._v("添加测试集合")]):e._e()],1),e._v(" "),e.hasPermission("executeplan:search")?i("span",[i("el-form-item",{attrs:{label:"测试集合:"}},[i("el-input",{attrs:{clearable:"",placeholder:"测试集合"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchBy(t)}},model:{value:e.search.executeplanname,callback:function(t){e.$set(e.search,"executeplanname",t)},expression:"search.executeplanname"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"业务类型:"}},[i("el-select",{attrs:{clearable:"",placeholder:"业务类型"},model:{value:e.search.businesstype,callback:function(t){e.$set(e.search,"businesstype",t)},expression:"search.businesstype"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.planbusinessdiclist,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.dicitmevalue,value:e.dicitmevalue}})],1)})],2)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.searchBy}},[e._v("查询")])],1)],1):e._e()],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.itemplanKey,ref:"fileTable",attrs:{data:e.executeplanList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""},on:{"row-click":e.handleClickTableRow,"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),i("el-table-column",{attrs:{label:"编号",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.getIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"集合名",align:"center",prop:"executeplanname",width:"100"}}),e._v(" "),e.show?i("el-table-column",{attrs:{label:"envid",align:"center",prop:"envid",width:"50"}}):e._e(),e._v(" "),e.show?i("el-table-column",{attrs:{label:"状态",align:"center",prop:"status",width:"50"}}):e._e(),e._v(" "),i("el-table-column",{attrs:{label:"业务类型",align:"center",prop:"businesstype",width:"70"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"执行环境",align:"center",prop:"enviromentname",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{label:"类型",align:"center",prop:"usetype",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{label:"运行模式",align:"center",prop:"runmode",width:"70"}}),e._v(" "),i("el-table-column",{attrs:{label:"场景数",align:"center",prop:"scenenums",width:"60"}}),e._v(" "),i("el-table-column",{attrs:{label:"用例数",align:"center",prop:"casecounts",width:"60"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"通知钉钉token",align:"center",prop:"dingdingtoken",width:"110"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作人",align:"center",prop:"creator",width:"60"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"创建时间",align:"center",prop:"createTime",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.unix2CurrentTime(t.row.createTime)))]}}])}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"最后修改时间",align:"center",prop:"lastmodifyTime",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.unix2CurrentTime(t.row.lastmodifyTime))+"\n        ")]}}])}),e._v(" "),e.hasPermission("executeplan:update")||e.hasPermission("executeplan:delete")?i("el-table-column",{attrs:{label:"管理",align:"center",width:"550"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("executeplan:update")&&t.row.id!==e.id?i("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showUpdateexecuteplanDialog(t.$index)}}},[e._v("修改")]):e._e(),e._v(" "),e.hasPermission("executeplan:delete")&&t.row.id!==e.id?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.removeexecuteplan(t.$index)}}},[e._v("删除")]):e._e(),e._v(" "),e.hasPermission("executeplan:update")&&t.row.id!==e.id?i("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showstopbatchDialog(t.$index)}}},[e._v("停止运行")]):e._e(),e._v(" "),e.hasPermission("executeplan:update")&&t.row.id!==e.id?i("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showplanparamsDialog(t.$index)}}},[e._v("全局Header")]):e._e(),e._v(" "),e.hasPermission("executeplan:update")&&t.row.id!==e.id?i("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showtestsceneDialog(t.$index)}}},[e._v("测试场景")]):e._e(),e._v(" "),e.hasPermission("executeplan:update")&&t.row.id!==e.id?i("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showtestplanConditionDialog(t.$index)}}},[e._v("前置条件")]):e._e()]}}],null,!1,464251033)}):e._e()],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.search.page,"page-size":e.search.size,total:e.total,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"tmpexecuteplan",staticClass:"small-space",staticStyle:{width:"400px","margin-left":"50px"},attrs:{"status-icon":"","label-position":"left","label-width":"120px",model:e.tmpexecuteplan}},[i("el-form-item",{attrs:{label:"集合名",prop:"executeplanname",required:""}},[i("el-input",{attrs:{type:"text",maxlength:"50","prefix-icon":"el-icon-edit","auto-complete":"off"},model:{value:e.tmpexecuteplan.executeplanname,callback:function(t){e.$set(e.tmpexecuteplan,"executeplanname","string"==typeof t?t.trim():t)},expression:"tmpexecuteplan.executeplanname"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类型",prop:"usetype",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"类型"},model:{value:e.tmpexecuteplan.usetype,callback:function(t){e.$set(e.tmpexecuteplan,"usetype",t)},expression:"tmpexecuteplan.usetype"}},[i("el-option",{attrs:{label:"功能",value:"功能"}}),e._v(" "),i("el-option",{attrs:{label:"性能",value:"性能"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"执行环境",prop:"enviromentname",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"执行环境"},on:{change:function(t){return e.enviromentselectChanged(t)}},model:{value:e.tmpexecuteplan.enviromentname,callback:function(t){e.$set(e.tmpexecuteplan,"enviromentname",t)},expression:"tmpexecuteplan.enviromentname"}},[i("el-option",{staticStyle:{display:"none"},attrs:{label:"请选择",value:"''"}}),e._v(" "),e._l(e.enviromentnameList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.enviromentname,value:e.enviromentname,required:""}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"业务类型",prop:"businesstype",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"业务类型"},on:{change:function(t){return e.businesstypeselectChanged(t)}},model:{value:e.tmpexecuteplan.businesstype,callback:function(t){e.$set(e.tmpexecuteplan,"businesstype",t)},expression:"tmpexecuteplan.businesstype"}},[i("el-option",{staticStyle:{display:"none"},attrs:{label:"请选择",value:"''"}}),e._v(" "),e._l(e.planbusinessdiclist,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.dicitmevalue,value:e.dicitmevalue,required:""}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"运行模式",prop:"runmode",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"运行模式"},model:{value:e.tmpexecuteplan.runmode,callback:function(t){e.$set(e.tmpexecuteplan,"runmode",t)},expression:"tmpexecuteplan.runmode"}},[i("el-option",{attrs:{label:"单机运行",value:"单机运行"}}),e._v(" "),i("el-option",{attrs:{label:"多机并行",value:"多机并行"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"钉钉通知token",prop:"dingdingtoken"}},[i("el-input",{attrs:{maxlength:"200",type:"text","prefix-icon":"el-icon-message","auto-complete":"off"},model:{value:e.tmpexecuteplan.dingdingtoken,callback:function(t){e.$set(e.tmpexecuteplan,"dingdingtoken",t)},expression:"tmpexecuteplan.dingdingtoken"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"memo"}},[i("el-input",{attrs:{maxlength:"200",type:"text","prefix-icon":"el-icon-message","auto-complete":"off"},model:{value:e.tmpexecuteplan.memo,callback:function(t){e.$set(e.tmpexecuteplan,"memo",t)},expression:"tmpexecuteplan.memo"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"add"===e.dialogStatus?i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.addexecuteplan(t)}}},[e._v("保存\n        ")]):e._e(),e._v(" "),"update"===e.dialogStatus?i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.updateexecuteplan(t)}}},[e._v("修改")]):e._e()],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.loadcase,visible:e.casedialogFormVisible},on:{"update:visible":function(t){e.casedialogFormVisible=t}}},[i("div",{staticClass:"filter-container"},[i("el-form",{ref:"searchcase",attrs:{inline:!0,model:e.searchcase}},[e.hasPermission("apicases:search")?i("span",[i("el-form-item",{attrs:{label:"微服务:",prop:"deployunitname",required:""}},[i("el-select",{attrs:{placeholder:"微服务"},on:{change:function(t){return e.selectChanged(t)}},model:{value:e.searchcase.deployunitname,callback:function(t){e.$set(e.searchcase,"deployunitname",t)},expression:"searchcase.deployunitname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.deployunitList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.deployunitname,value:e.deployunitname,required:""}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"API:"}},[i("el-select",{attrs:{placeholder:"api名"},model:{value:e.searchcase.apiname,callback:function(t){e.$set(e.searchcase,"apiname",t)},expression:"searchcase.apiname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.apiList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.apiname,value:e.apiname}})],1)})],2)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.searchcaseBy}},[e._v("查询")])],1)],1):e._e()])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.itemcaseKey,ref:"caseTable",attrs:{data:e.testcaselastList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""},on:{"row-click":e.casehandleClickTableRow,"selection-change":e.casehandleSelectionChange}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.getIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{type:"selection",prop:"status",width:"50"}}),e._v(" "),e.show?i("el-table-column",{attrs:{label:"apiid",align:"center",prop:"apiid",width:"120"}}):e._e(),e._v(" "),e.show?i("el-table-column",{attrs:{label:"deployunitid",align:"center",prop:"deployunitid",width:"120"}}):e._e(),e._v(" "),i("el-table-column",{attrs:{label:"用例名",align:"center",prop:"casename",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{label:"微服务",align:"center",prop:"deployunitname",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{label:"API",align:"center",prop:"apiname",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{label:"期望值",align:"center",prop:"expect",width:"120"}})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.searchcase.page,"page-size":e.searchcase.size,total:e.casetotal,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.casehandleSizeChange,"current-change":e.casehandleCurrentChange}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.casedialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.addexecuteplantestcase(t)}}},[e._v("装载")]),e._v(" "),i("el-button",{attrs:{type:"warning",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.removeexecuteplantestcase(t)}}},[e._v("取消装载")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.loadbatch,visible:e.batchdialogFormVisible},on:{"update:visible":function(t){e.batchdialogFormVisible=t}}},[i("div",{staticClass:"filter-container"},[i("el-form",{ref:"tmpplanbatch",attrs:{model:e.tmpplanbatch}},[i("el-form-item",{attrs:{label:"执行计划：",prop:"batchname",required:""}},[i("el-input",{staticStyle:{width:"60%"},attrs:{type:"text",maxlength:"50",placeholder:"例如2020-10-21-tag-101","prefix-icon":"el-icon-edit","auto-complete":"off"},model:{value:e.tmpplanbatch.batchname,callback:function(t){e.$set(e.tmpplanbatch,"batchname","string"==typeof t?t.trim():t)},expression:"tmpplanbatch.batchname"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"执行类型：",prop:"exectype",required:""}},[i("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"执行类型"},on:{change:function(t){return e.exectypeselectChanged(t)}},model:{value:e.tmpplanbatch.exectype,callback:function(t){e.$set(e.tmpplanbatch,"exectype",t)},expression:"tmpplanbatch.exectype"}},[i("el-option",{attrs:{label:"立即执行",value:"立即执行"}}),e._v(" "),i("el-option",{attrs:{label:"某天定时",value:"某天定时"}}),e._v(" "),i("el-option",{attrs:{label:"每天定时",value:"每天定时"}})],1)],1),e._v(" "),e.datevisible?i("div",[i("el-form-item",{attrs:{label:"选择日期：",prop:"exectmpdate",required:""}},[i("el-date-picker",{staticStyle:{width:"60%"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.tmpplanbatch.exectmpdate,callback:function(t){e.$set(e.tmpplanbatch,"exectmpdate",t)},expression:"tmpplanbatch.exectmpdate"}})],1)],1):e._e(),e._v(" "),e.timevisible?i("div",[i("el-form-item",{attrs:{label:"选择时刻：",prop:"exectime",required:""}},[i("el-time-select",{staticStyle:{width:"60%"},attrs:{"picker-options":{start:"00:05",step:"00:10",end:"23:55"},placeholder:"选择时间"},model:{value:e.tmpplanbatch.exectime,callback:function(t){e.$set(e.tmpplanbatch,"exectime",t)},expression:"tmpplanbatch.exectime"}})],1)],1):e._e()],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.batchdialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"success",loading:e.execbtnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.savebatchandexecuteplancase(t)}}},[e._v("执行")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:"停止运行计划",visible:e.stopbatchdialogFormVisible},on:{"update:visible":function(t){e.stopbatchdialogFormVisible=t}}},[i("div",{staticClass:"filter-container"},[i("el-form",{ref:"tmpstopplanbatch",attrs:{model:e.tmpstopplanbatch}},[i("el-form-item",{attrs:{label:"执行计划：",prop:"batchname",required:""}},[i("el-select",{staticStyle:{width:"70%"},attrs:{clearable:"",placeholder:"执行计划"},on:{change:function(t){return e.stopplanbatchselectChanged(t)}},model:{value:e.tmpstopplanbatch.batchname,callback:function(t){e.$set(e.tmpstopplanbatch,"batchname",t)},expression:"tmpstopplanbatch.batchname"}},[i("el-option",{staticStyle:{display:"none"},attrs:{label:"请选择",value:"''"}}),e._v(" "),e._l(e.stopplanbatchList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.batchname,value:e.batchname,required:""}})],1)})],2)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.stopbatchdialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return t.preventDefault(),e.updatebatchstatus(t)}}},[e._v("停止")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:"全局Header",visible:e.CollectionParamsFormVisible},on:{"update:visible":function(t){e.CollectionParamsFormVisible=t}}},[i("div",{staticClass:"filter-container"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[e.hasPermission("executeplan:add")?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return t.preventDefault(),e.showAddapiparamsDialog(t)}}},[e._v("添加全局Header")]):e._e()],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.itemKey,attrs:{data:e.paramsList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"45"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.paramgetIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"Header",align:"center",prop:"globalheadername",width:"280"}}),e._v(" "),e.hasPermission("executeplan:update")||e.hasPermission("executeplan:delete")?i("el-table-column",{attrs:{label:"管理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("executeplan:update")&&t.row.id!==e.id?i("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showUpdateparamsDialog(t.$index)}}},[e._v("修改")]):e._e(),e._v(" "),e.hasPermission("executeplan:delete")&&t.row.id!==e.id?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.removeexecuteplanparam(t.$index)}}},[e._v("删除")]):e._e()]}}],null,!1,2267587065)}):e._e()],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"集合前置条件",visible:e.ConditionFormVisible},on:{"update:visible":function(t){e.ConditionFormVisible=t}}},[i("div",{staticClass:"filter-container"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[e.hasPermission("testscene:scenecasecondition")?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return t.preventDefault(),e.ShowAddPlancaseconditionDialog(t)}}},[e._v("添加前置接口")]):e._e()],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.apiconditioncaseList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"45"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.apiconditioncaseIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"前置条件名",align:"center",prop:"subconditionname",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"前置接口",align:"center",prop:"casename",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"所属集合",align:"center",prop:"conditionname",width:"150"}}),e._v(" "),e.hasPermission("testscene:caseupdateapicondition")||e.hasPermission("testscene:casedeleteapicondition")?i("el-table-column",{attrs:{label:"管理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("testscene:caseupdateapicondition")&&t.row.id!==e.id?i("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showUpdateapiconditionDialog(t.$index)}}},[e._v("修改")]):e._e(),e._v(" "),e.hasPermission("testscene:casedeleteapicondition")&&t.row.id!==e.id?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.removecaseapicondition(t.$index)}}},[e._v("删除")]):e._e()]}}],null,!1,3600714770)}):e._e()],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.SceneapiconditiontextMap[e.SceneconditiondialogStatus],visible:e.SceneconditiondialogFormVisible},on:{"update:visible":function(t){e.SceneconditiondialogFormVisible=t}}},[i("el-form",{ref:"tmpsceneapicondition",staticClass:"small-space",staticStyle:{width:"450px","margin-left":"50px"},attrs:{"status-icon":"","label-position":"left","label-width":"120px",model:e.tmpsceneapicondition}},[i("el-form-item",{attrs:{label:"前置条件名",prop:"subconditionname",required:""}},[i("el-input",{attrs:{type:"text",maxlength:"30","prefix-icon":"el-icon-edit","auto-complete":"off"},model:{value:e.tmpsceneapicondition.subconditionname,callback:function(t){e.$set(e.tmpsceneapicondition,"subconditionname",t)},expression:"tmpsceneapicondition.subconditionname"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"微服务",prop:"deployunitname",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"微服务"},on:{change:function(t){return e.sceneconditiondeployunitselectChanged(t)}},model:{value:e.tmpsceneapicondition.deployunitname,callback:function(t){e.$set(e.tmpsceneapicondition,"deployunitname",t)},expression:"tmpsceneapicondition.deployunitname"}},[i("el-option",{staticStyle:{display:"none"},attrs:{label:"请选择",value:"''"}}),e._v(" "),e._l(e.deployunitList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.deployunitname,value:e.deployunitname,required:""}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"模块:",prop:"modelname"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"模块"},on:{change:function(t){return e.sceneconditionmodelselectChanged(t)}},model:{value:e.tmpsceneapicondition.modelname,callback:function(t){e.$set(e.tmpsceneapicondition,"modelname",t)},expression:"tmpsceneapicondition.modelname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.sceneconditionmodelList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.modelname,value:e.modelname}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"API",prop:"apiname",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"API"},on:{change:function(t){return e.sceneconditionapiselectChanged(t)}},model:{value:e.tmpsceneapicondition.apiname,callback:function(t){e.$set(e.tmpsceneapicondition,"apiname",t)},expression:"tmpsceneapicondition.apiname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.sceneconditionapiList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.apiname,value:e.apiname}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"接口",prop:"casename",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"接口"},on:{change:function(t){return e.sceneconditiontestcaseselectChanged(t)}},model:{value:e.tmpsceneapicondition.casename,callback:function(t){e.$set(e.tmpsceneapicondition,"casename",t)},expression:"tmpsceneapicondition.casename"}},[i("el-option",{staticStyle:{display:"none"},attrs:{label:"请选择",value:"''"}}),e._v(" "),e._l(e.sceneconditioncaseList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.casename,value:e.casename,required:""}})],1)})],2)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.SceneconditiondialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"add"===e.SceneconditiondialogStatus?i("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return t.preventDefault(),e.$refs.tmpapicondition.resetFields()}}},[e._v("重置")]):e._e(),e._v(" "),"add"===e.SceneconditiondialogStatus?i("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return t.preventDefault(),e.addscenecondition(t)}}},[e._v("添加")]):e._e(),e._v(" "),"update"===e.SceneconditiondialogStatus?i("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return t.preventDefault(),e.updatescenecondition(t)}}},[e._v("修改")]):e._e()],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.paramstextMap[e.ParamsdialogStatus],visible:e.modifyparamdialogFormVisible},on:{"update:visible":function(t){e.modifyparamdialogFormVisible=t}}},[i("el-form",{ref:"tmpparam",staticClass:"small-space",staticStyle:{width:"600px","margin-left":"30px"},attrs:{"status-icon":"","label-position":"left","label-width":"120px",model:e.tmpparam}},[i("el-form-item",{attrs:{label:"全局Header:",prop:"globalheadername",required:""}},[i("el-select",{staticStyle:{width:"415px"},attrs:{placeholder:"全局Header"},on:{change:function(t){return e.notexistheaderselectChanged(t)}},model:{value:e.tmpparam.globalheadername,callback:function(t){e.$set(e.tmpparam,"globalheadername",t)},expression:"tmpparam.globalheadername"}},e._l(e.globalheaderallList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.globalheadername,value:e.globalheadername}})],1)}),0)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.modifyparamdialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"add"===e.ParamsdialogStatus?i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.addparams(t)}}},[e._v("添加")]):e._e(),e._v(" "),"update"===e.ParamsdialogStatus?i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.updatparam(t)}}},[e._v("修改")]):e._e()],1)],1),e._v(" "),i("el-dialog",{attrs:{width:"840px",title:"测试场景",visible:e.testscenedialogFormVisible},on:{"update:visible":function(t){e.testscenedialogFormVisible=t}}},[i("div",{staticClass:"filter-container"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.ShowAddScenceDialog}},[e._v("添加场景")])],1)],1)],1),e._v(" "),i("el-table",{ref:"testplansceneTable",attrs:{data:e.testplansceneList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.planscenegetIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"场景名",align:"center",prop:"scenename",width:"280"}}),e._v(" "),i("el-table-column",{attrs:{width:"120",align:"center",label:"场景顺序"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.edit?[i("el-input",{staticClass:"edit-input",attrs:{oninput:"value=value.replace(/[^\\d]/g,'')",maxLength:"10",size:"small"},model:{value:n.ordernum,callback:function(t){e.$set(n,"ordernum",t)},expression:"row.ordernum"}}),e._v(" "),i("el-button",{staticClass:"cancel-btn",attrs:{size:"small",icon:"el-icon-refresh",type:"warning"},on:{click:function(t){return e.cancelEdit(n)}}},[e._v("\n                取消\n              ")])]:i("span",[e._v(e._s(n.ordernum))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.edit?i("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(t){return e.confirmEdit(n)}}},[e._v("\n              保存\n            ")]):i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){n.edit=!n.edit}}},[e._v("\n              设置顺序\n            ")])]}}])}),e._v(" "),e.hasPermission("testscene:deletecase")||e.hasPermission("testscene:scenecondition")?i("el-table-column",{attrs:{label:"管理",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("testscene:deletecase")&&t.row.id!==e.id?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.removetestplanscene(t.$index)}}},[e._v("删除")]):e._e(),e._v(" "),e.hasPermission("testscene:scenecondition")&&t.row.id!==e.id?i("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showtestscenecaseConditionDialog(t.$index)}}},[e._v("前置条件")]):e._e()]}}],null,!1,1684076174)}):e._e()],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.searchscene.page,"page-size":e.searchscene.size,total:e.testplanscenetotal,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.planscenehandleSizeChange,"current-change":e.planscenehandleCurrentChange}})],1),e._v(" "),i("el-dialog",{attrs:{width:"800px",title:"添加场景",visible:e.addtestscenedialogFormVisible},on:{"update:visible":function(t){e.addtestscenedialogFormVisible=t}}},[i("el-table",{key:e.itemaddsceneKey,ref:"addsceneTable",attrs:{data:e.testsceneList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""},on:{"row-click":e.addscenehandleClickTableRow,"selection-change":e.addscenehandleSelectionChange}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.addscenegetIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{type:"selection",prop:"status",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{label:"场景名",align:"center",prop:"scenename",width:"370"}}),e._v(" "),i("el-table-column",{attrs:{label:"场景类型",align:"center",prop:"usetype",width:"280"}})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.addsearchscene.page,"page-size":e.addsearchscene.size,total:e.addscenetotal,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.addscenehandleSizeChange,"current-change":e.addscenehandleCurrentChange}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.addtestscenedialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.addplantestscene(t)}}},[e._v("添加")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.apiconditiontextMap[e.apiconditiondialogStatus],visible:e.caseconditiondialogFormVisible},on:{"update:visible":function(t){e.caseconditiondialogFormVisible=t}}},[i("el-form",{ref:"tmpapicondition",staticClass:"small-space",staticStyle:{width:"450px","margin-left":"50px"},attrs:{"status-icon":"","label-position":"left","label-width":"120px",model:e.tmpapicondition}},[i("el-form-item",{attrs:{label:"前置条件名",prop:"subconditionname",required:""}},[i("el-input",{attrs:{type:"text",maxlength:"30","prefix-icon":"el-icon-edit","auto-complete":"off"},model:{value:e.tmpapicondition.subconditionname,callback:function(t){e.$set(e.tmpapicondition,"subconditionname",t)},expression:"tmpapicondition.subconditionname"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"微服务",prop:"deployunitname",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"微服务"},on:{change:function(t){return e.apiconditiondeployunitselectChanged(t)}},model:{value:e.tmpapicondition.deployunitname,callback:function(t){e.$set(e.tmpapicondition,"deployunitname",t)},expression:"tmpapicondition.deployunitname"}},[i("el-option",{staticStyle:{display:"none"},attrs:{label:"请选择",value:"''"}}),e._v(" "),e._l(e.deployunitList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.deployunitname,value:e.deployunitname,required:""}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"模块:",prop:"modelname"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"模块"},on:{change:function(t){return e.apiconditionmodelselectChanged(t)}},model:{value:e.tmpapicondition.modelname,callback:function(t){e.$set(e.tmpapicondition,"modelname",t)},expression:"tmpapicondition.modelname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.apiconditionmodelList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.modelname,value:e.modelname}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"API",prop:"apiname",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"API"},on:{change:function(t){return e.apiconditionapiselectChanged(t)}},model:{value:e.tmpapicondition.apiname,callback:function(t){e.$set(e.tmpapicondition,"apiname",t)},expression:"tmpapicondition.apiname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.apiconditionapiList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.apiname,value:e.apiname}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"接口",prop:"casename",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"接口"},on:{change:function(t){return e.apiconditiontestcaseselectChanged(t)}},model:{value:e.tmpapicondition.casename,callback:function(t){e.$set(e.tmpapicondition,"casename",t)},expression:"tmpapicondition.casename"}},[i("el-option",{staticStyle:{display:"none"},attrs:{label:"请选择",value:"''"}}),e._v(" "),e._l(e.apiconditioncaseList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.casename,value:e.casename,required:""}})],1)})],2)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.caseconditiondialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"add"===e.apiconditiondialogStatus?i("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return t.preventDefault(),e.$refs.tmpapicondition.resetFields()}}},[e._v("重置")]):e._e(),e._v(" "),"add"===e.apiconditiondialogStatus?i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.addapicondition(t)}}},[e._v("添加")]):e._e(),e._v(" "),"update"===e.apiconditiondialogStatus?i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.updateapicondition(t)}}},[e._v("修改")]):e._e()],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"场景前置条件",visible:e.scenecaseConditionFormVisible},on:{"update:visible":function(t){e.scenecaseConditionFormVisible=t}}},[i("div",{staticClass:"filter-container"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[e.hasPermission("testscene:scenecasecondition")?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return t.preventDefault(),e.ShowAddPlanSceneconditionDialog(t)}}},[e._v("添加前置接口")]):e._e(),e._v(" "),e.hasPermission("testscene:scenecasecondition")?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return t.preventDefault(),e.showAddScenedelayconditionDialog(t)}}},[e._v("添加前置延时")]):e._e()],1)],1)],1),e._v("\n\n            1.接口前置条件：\n\n\n      "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.apiconditioncaseList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"45"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.apiconditioncaseIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"前置条件名",align:"center",prop:"subconditionname",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"前置接口",align:"center",prop:"casename",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"所属场景",align:"center",prop:"conditionname",width:"150"}}),e._v(" "),e.hasPermission("testscene:caseupdateapicondition")||e.hasPermission("testscene:casedeleteapicondition")?i("el-table-column",{attrs:{label:"管理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("testscene:caseupdateapicondition")&&t.row.id!==e.id?i("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showUpdatesceneconditionDialog(t.$index)}}},[e._v("修改")]):e._e(),e._v(" "),e.hasPermission("testscene:casedeleteapicondition")&&t.row.id!==e.id?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.removecasescenecondition(t.$index)}}},[e._v("删除")]):e._e()]}}],null,!1,3571302418)}):e._e()],1),e._v("\n\n            2.延时前置条件：\n\n\n      "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.itemKey,attrs:{data:e.delayconditionList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.getIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"前置条件名",align:"center",prop:"subconditionname",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{label:"等待时间(秒)",align:"center",prop:"delaytime",width:"150"}}),e._v(" "),e.hasPermission("delaycondition:update")||e.hasPermission("delaycondition:delete")?i("el-table-column",{attrs:{label:"管理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("delaycondition:update")&&t.row.id!==e.id?i("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showUpdatedelayconditionDialog(t.$index)}}},[e._v("修改")]):e._e(),e._v(" "),e.hasPermission("delaycondition:delete")&&t.row.id!==e.id?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.removedelaycondition(t.$index)}}},[e._v("删除")]):e._e()]}}],null,!1,4005561702)}):e._e()],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.DelaytextMap[e.DelaydialogStatus],visible:e.DelaydialogFormVisible},on:{"update:visible":function(t){e.DelaydialogFormVisible=t}}},[i("el-form",{ref:"tmpdelaycondition",staticClass:"small-space",staticStyle:{width:"600px","margin-left":"50px"},attrs:{"status-icon":"","label-position":"left","label-width":"120px",model:e.tmpdelaycondition}},[i("el-form-item",{attrs:{label:"条件名",prop:"subconditionname",required:""}},[i("el-input",{attrs:{type:"text",maxlength:"30","prefix-icon":"el-icon-edit","auto-complete":"off"},model:{value:e.tmpdelaycondition.subconditionname,callback:function(t){e.$set(e.tmpdelaycondition,"subconditionname",t)},expression:"tmpdelaycondition.subconditionname"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"等待时间(秒)",prop:"delaytime",required:""}},[i("el-input",{attrs:{placeholder:"等待时间(秒)",oninput:"value=value.replace(/[^\\d]/g,'')",maxLength:"10",type:"number","prefix-icon":"el-icon-message","auto-complete":"off"},model:{value:e.tmpdelaycondition.delaytime,callback:function(t){e.$set(e.tmpdelaycondition,"delaytime",t)},expression:"tmpdelaycondition.delaytime"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.DelaydialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"add"===e.DelaydialogStatus?i("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return t.preventDefault(),e.$refs.tmpdelaycondition.resetFields()}}},[e._v("重置")]):e._e(),e._v(" "),"add"===e.DelaydialogStatus?i("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return t.preventDefault(),e.adddelaycondition(t)}}},[e._v("添加")]):e._e(),e._v(" "),"update"===e.DelaydialogStatus?i("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return t.preventDefault(),e.updatedelaycondition(t)}}},[e._v("修改")]):e._e()],1)],1)],1)},staticRenderFns:[]},O=i("VU/8")($,C,!1,null,null,null);t.default=O.exports},nzYI:function(e,t,i){"use strict";t.e=function(e){return Object(n.a)({url:"/globalheaderuse/searchheaderbyepid",method:"post",data:e})},t.g=function(e){return Object(n.a)({url:"globalheaderuse/searchnotexit",method:"post",data:e})},t.f=function(e){return Object(n.a)({url:"globalheaderuse/searchexit",method:"post",data:e})},t.b=function(e){return Object(n.a)({url:"globalheaderuse/addcases",method:"post",data:e})},t.c=function(e){return Object(n.a)({url:"globalheaderuse/deletacases",method:"post",data:e})},t.a=function(e){return Object(n.a)({url:"globalheaderuse/",method:"post",data:e})},t.h=function(e){return Object(n.a)({url:"globalheaderuse/detail",method:"put",data:e})},t.d=function(e){return Object(n.a)({url:"globalheaderuse/"+e,method:"delete"})};var n=i("vLgD")}});
//# sourceMappingURL=13.613dc08a48e675b6261e.js.map