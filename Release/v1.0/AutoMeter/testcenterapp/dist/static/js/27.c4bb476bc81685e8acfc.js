webpackJsonp([27],{DkJU:function(e,t,i){"use strict";t.e=function(e){return Object(n.a)({url:"/testscene/search",method:"post",data:e})},t.a=function(e){return Object(n.a)({url:"/testscene",method:"post",data:e})},t.f=function(e){return Object(n.a)({url:"/testscene/detail",method:"put",data:e})},t.b=function(e){return Object(n.a)({url:"/testscene/copyscene",method:"post",data:e})},t.c=function(e){return Object(n.a)({url:"/testscene/scenes",method:"get",params:e})},t.d=function(e){return Object(n.a)({url:"/testscene/"+e,method:"delete"})};var n=i("vLgD")},UbPf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),s=i("2d0t"),o=i("W+bg"),c=i("XcM5"),l=i("DkJU"),d=i("vLgD");function r(e){return Object(d.a)({url:"/testscene/testcase/findcasebyscenenid",method:"post",data:e})}var p=i("0xDb"),u=i("k8Cg"),m=i("0qgb"),h=i("5kbS"),f=i("W/rB"),g=i("mKAx"),b=i("NYxO"),v={name:"测试场景",filters:{statusFilter:function(e){return{published:"success",draft:"gray",deleted:"danger"}[e]}},data:function(){return{id:null,tmpexecuteplanid:null,tmpaddcaseexecuteplanid:null,tmpdeployunitid:null,tmpaddcasedeployunitid:null,tmpaddcaseapiid:null,tmpapiid:null,itemKey:null,itemaddcaseKey:null,tmptestscenename:"",testsceneList:[],testscenecaseList:[],addtestcaselastList:[],casemultipleSelection:[],testcaseList:[],apiList:[],addcaseapiList:[],apiconditionapiList:[],addcasemodelList:[],modelList:[],apiconditionmodelList:[],addcasedeployunitList:[],deployunitList:[],apiconditioncaseList:[],dbconditioncaseList:[],enviromentnameList:[],enviroment_assembleList:[],sourcetestsceneList:[],listLoading:!1,addcaselistLoading:!1,total:0,casetotal:0,addcasetotal:0,dialogStatus:"add",apiconditiondialogStatus:"add",dialogFormVisible:!1,testscenecasedialogFormVisible:!1,addtestscenecasedialogFormVisible:!1,sceneConditionFormVisible:!1,scenecaseConditionFormVisible:!1,caseconditiondialogFormVisible:!1,dbconditiondialogFormVisible:!1,CopysceneFormVisible:!1,tmpcopyscene:{sourcesceneid:"",sourcescenename:"",newscenename:""},textMap:{updateRole:"修改环境",update:"修改环境",add:"添加环境"},apiconditiontextMap:{update:"修改前置接口",add:"添加前置接口"},btnLoading:!1,caseQuery:{page:1,size:10,deployunitid:0,modelid:0,deployunitname:""},addcaseQuery:{page:1,size:10,deployunitid:0,modelid:0,deployunitname:""},tmpapicondition:{page:1,size:10,id:"",modelid:0,modelname:"",conditionid:"",subconditionname:"",conditionname:"",deployunitid:"",deployunitname:"",apiname:"",apiid:"",caseid:"",casename:"",memo:"",conditiontype:"",creator:"",projectid:""},tmpdbcondition:{id:"",conditionid:"",conditionname:"",assembleid:"",assemblename:"",subconditionname:"",enviromentid:"",enviromentname:"",dbtype:"",dbcontent:"",connectstr:"",memo:"",conditiontype:"",creator:"",projectid:""},tmptestscene:{id:"",scenename:"",usetype:"",creator:"",memo:"",projectid:""},searchcase:{page:1,size:10,testscenenid:"",testscenenname:null,scenentype:"",executeplanid:null,executeplanname:null,deployunitid:null,deployunitname:null,modelid:0,modelname:"",apiid:null,apiname:null,casetype:null},addsearchcase:{page:1,size:10,executeplanid:null,executeplanname:null,deployunitid:null,deployunitname:null,modelid:null,modelname:null,apiid:null,apiname:null,casetype:null},search:{page:1,size:10,scenename:null,projectid:""},searchapicondition:{page:1,size:10,conditionid:"",conditiontype:"",projectid:""},searchallscene:{projectid:""},searchdbcondition:{page:1,size:10,conditionid:"",conditiontype:"",projectid:""}}},created:function(){this.search.projectid=window.localStorage.getItem("pid"),this.getdepunitLists(),this.searchapicondition.projectid=window.localStorage.getItem("pid"),this.searchdbcondition.projectid=window.localStorage.getItem("pid"),this.searchallscene.projectid=window.localStorage.getItem("pid"),this.gettestsceneList(),this.getassembleallnameList(),this.getenviromentallList(),this.getsceneallList()},activated:function(){this.getdepunitLists(),this.gettestsceneList()},computed:a()({},Object(b.b)(["name","sidebar","projectlist","projectid"])),methods:{unix2CurrentTime:p.b,copyscene:function(){var e=this;this.$refs.tmpcopyscene.validate(function(t){t&&Object(l.b)(e.tmpcopyscene).then(function(){e.$message.success("复制成功"),e.gettestsceneList(),e.CopysceneFormVisible=!1}).catch(function(t){e.$message.error("复制失败")})})},CopySourceSceneChanged:function(e){for(var t=0;t<this.sourcetestsceneList.length;t++)this.sourcetestsceneList[t].scenename===e&&(this.tmpcopyscene.sourcesceneid=this.sourcetestsceneList[t].id)},getsceneallList:function(){var e=this;Object(l.c)(this.searchallscene).then(function(t){e.sourcetestsceneList=t.data}).catch(function(t){e.$message.error("加载数据库条件列表失败")})},getenviromentallList:function(){var e=this;this.listLoading=!0,Object(f.c)(this.search).then(function(t){e.enviromentnameList=t.data}).catch(function(t){e.$message.error("加载数据库条件列表失败")})},getassembleallnameList:function(){var e=this;Object(g.b)(this.searchdbcondition).then(function(t){e.enviroment_assembleList=t.data}).catch(function(t){e.$message.error("获取组件列表失败")})},selectChangedEN:function(e){for(var t=0;t<this.enviromentnameList.length;t++)this.enviromentnameList[t].enviromentname===e&&(this.tmpdbcondition.enviromentid=this.enviromentnameList[t].id)},ConditionselectChangedAS:function(e){for(var t=0;t<this.enviroment_assembleList.length;t++)this.enviroment_assembleList[t].assemblename===e&&(this.tmpdbcondition.assembleid=this.enviroment_assembleList[t].id)},adddbcondition:function(){var e=this;this.$refs.tmpdbcondition.validate(function(t){t&&Object(h.a)(e.tmpdbcondition).then(function(){e.$message.success("添加成功"),e.dbconditiondialogFormVisible=!1,e.getdbconditionList()}).catch(function(t){e.$message.error("添加失败")})})},getapiconditionList:function(){var e=this;Object(m.c)(this.searchapicondition).then(function(t){e.apiconditioncaseList=t.data.list}).catch(function(t){e.$message.error("加载测试接口条件列表失败")})},getdbconditionList:function(){var e=this;Object(h.d)(this.searchdbcondition).then(function(t){e.dbconditioncaseList=t.data.list}).catch(function(t){e.$message.error("加载测试数据库条件列表失败")})},cancelEdit:function(e){e.caseorder=e.oldcaseorder,e.edit=!1},confirmEdit:function(e){var t,i=this;e.edit=!1,(t=e,Object(d.a)({url:"/testscene/testcase/updatescenenCaseorder",method:"post",data:t})).then(function(t){e.oldcaseorder=e.caseorder,i.$message.success("修改顺序成功")}).catch(function(t){e.caseorder=e.oldcaseorder,i.$message.error("修改顺序失败")})},getdepunitLists:function(){var e=this;Object(c.e)(this.search).then(function(t){e.deployunitList=t.data}).catch(function(t){e.$message.error("加载微服务列表失败")})},gettestsceneList:function(){var e=this;this.listLoading=!0,this.search.scenename=this.tmptestscenename,Object(l.e)(this.search).then(function(t){e.testsceneList=t.data.list,e.total=t.data.total,e.listLoading=!1}).catch(function(t){e.$message.error("加载环境列表失败")})},searchBy:function(){var e=this;this.search.page=1,this.listLoading=!0,Object(l.e)(this.search).then(function(t){e.itemKey=Math.random(),e.testsceneList=t.data.list,e.total=t.data.total}).catch(function(t){e.$message.error("搜索失败")}),this.tmptestscenename=this.search.scenename,this.listLoading=!1,this.btnLoading=!1},handleSizeChange:function(e){this.search.page=1,this.search.size=e,this.gettestsceneList()},casehandleSizeChange:function(e){this.searchcase.page=1,this.searchcase.size=e,this.gettestscenecaseList()},addcasehandleSizeChange:function(e){this.searchcase.page=1,this.searchcase.size=e,this.getaddcasesList()},handleCurrentChange:function(e){this.search.page=e,this.gettestsceneList()},casehandleCurrentChange:function(e){this.searchcase.page=e,this.gettestscenecaseList()},addcasehandleCurrentChange:function(e){this.addsearchcase.page=e,this.getaddcasesList()},addcasehandleClickTableRow:function(e,t,i){},addcasehandleSelectionChange:function(e){this.casemultipleSelection=e},getIndex:function(e){return(this.search.page-1)*this.search.size+e+1},scenecasegetIndex:function(e){return(this.searchcase.page-1)*this.searchcase.size+e+1},apiconditioncaseIndex:function(e){return(this.searchapicondition.page-1)*this.searchapicondition.size+e+1},dbconditioncaseIndex:function(e){return(this.searchdbcondition.page-1)*this.searchdbcondition.size+e+1},sceneaddcasegetIndex:function(e){return(this.addsearchcase.page-1)*this.addsearchcase.size+e+1},gettestscenecaseList:function(){var e=this;this.searchcase.executeplanid=this.tmpcaseexecuteplanid,this.searchcase.deployunitid=this.tmpcasedeployunitid,this.searchcase.apiid=this.tmpcaseapiid,r(this.searchcase).then(function(t){e.testscenecaseList=t.data.list;var i=t.data.list;e.testscenecaseList=i.map(function(t){return e.$set(t,"edit",!1),t.oldcaseorder=t.caseorder,t}),e.casetotal=t.data.total,e.listLoading=!1}).catch(function(t){e.$message.error("加载场景用例列表失败")})},searchscenecaseBy:function(){var e=this;r(this.searchcase).then(function(t){e.testscenecaseList=t.data.list,e.casetotal=t.data.total}).catch(function(t){e.$message.error("搜索失败")}),this.tmpcaseexecuteplanid=this.searchcase.executeplanid,this.tmpcasedeployunitid=this.searchcase.deployunitid,this.tmpcaseapiid=this.searchcase.apiid},getaddcasesList:function(){var e=this;this.addcaselistLoading=!0,this.addsearchcase.executeplanid=this.tmpaddcaseexecuteplanid,this.addsearchcase.deployunitid=this.tmpaddcasedeployunitid,this.addsearchcase.apiid=this.tmpaddcaseapiid,this.addsearchcase.casetype=this.searchcase.casetype,Object(s.m)(this.addsearchcase).then(function(t){e.addtestcaselastList=t.data.list,e.addcasetotal=t.data.total,e.addcaselistLoading=!1}).catch(function(t){e.$message.error("加载用例列表失败")})},searchaddcaseBy:function(){var e=this;Object(s.m)(this.addsearchcase).then(function(t){e.itemaddcaseKey=Math.random(),e.addtestcaselastList=t.data.list,e.addcasetotal=t.data.total}).catch(function(t){e.$message.error("搜索失败")}),this.tmpaddcaseexecuteplanid=this.addsearchcase.executeplanid,this.tmpaddcasedeployunitid=this.addsearchcase.deployunitid,this.tmpaddcaseapiid=this.addsearchcase.apiid,this.listLoading=!1,this.btnLoading=!1,this.getaddcasesList()},showAddtestsceneDialog:function(){this.dialogFormVisible=!0,this.dialogStatus="add",this.tmptestscene.id="",this.tmptestscene.scenename="",this.tmptestscene.usetype="",this.tmptestscene.memo="",this.tmptestscene.creator=this.name,this.tmptestscene.projectid=window.localStorage.getItem("pid")},showCopytestsceneDialog:function(){this.CopysceneFormVisible=!0,this.tmpcopyscene.newscenename="",this.tmpcopyscene.sourcescenename="",this.tmpcopyscene.sourcesceneid=""},showtestsceneConditionDialog:function(e){this.sceneConditionFormVisible=!0},showtestscenecaseConditionDialog:function(e){this.scenecaseConditionFormVisible=!0,this.tmpapicondition.conditionid=this.testscenecaseList[e].id,this.tmpapicondition.conditionname=this.testscenecaseList[e].casename,this.tmpapicondition.conditiontype="scencecase",this.searchapicondition.conditiontype="scencecase",this.searchapicondition.conditionid=this.testscenecaseList[e].id,this.searchdbcondition.conditiontype="scencecase",this.searchdbcondition.conditionid=this.testscenecaseList[e].id,this.tmpdbcondition.conditionid=this.testscenecaseList[e].id,this.tmpdbcondition.conditionname=this.testscenecaseList[e].casename,this.tmpdbcondition.conditiontype="scencecase",this.getapiconditionList(),this.getdbconditionList()},ShowAddcasecaseconditionDialog:function(e){this.caseconditiondialogFormVisible=!0,this.apiconditiondialogStatus="add",this.tmpapicondition.id="",this.tmpapicondition.subconditionname="",this.tmpapicondition.deployunitname="",this.tmpapicondition.apiname="",this.tmpapicondition.modelname="",this.tmpapicondition.casename="",this.tmpapicondition.memo="",this.tmpapicondition.creator=this.name,this.tmpapicondition.projectid=window.localStorage.getItem("pid")},AddcasedbconditionDialog:function(e){this.dbconditiondialogFormVisible=!0},showtestsceneCaseDialog:function(e){this.testscenecasedialogFormVisible=!0,this.searchcase.testscenenid=this.testsceneList[e].id,this.searchcase.testscenenname=this.testsceneList[e].scenename,this.searchcase.casetype=this.testsceneList[e].usetype,this.gettestscenecaseList()},ShowAddCaseDialog:function(e){this.addtestscenecasedialogFormVisible=!0},addtestscene:function(){var e=this;this.$refs.tmptestscene.validate(function(t){t&&(e.btnLoading=!0,Object(l.a)(e.tmptestscene).then(function(){e.$message.success("添加成功"),e.gettestsceneList(),e.dialogFormVisible=!1,e.btnLoading=!1}).catch(function(t){e.$message.error("添加失败"),e.btnLoading=!1}))})},addapicondition:function(){var e=this;this.$refs.tmpapicondition.validate(function(t){t&&Object(m.a)(e.tmpapicondition).then(function(){e.$message.success("添加成功"),e.caseconditiondialogFormVisible=!1,e.getapiconditionList()}).catch(function(t){e.$message.error("添加失败"),e.btnLoading=!1})})},addtestscenetestcase:function(){var e,t=this;if(this.testcaseList=[],0===this.casemultipleSelection.length)this.$message.error("请选择装载的用例");else{for(var i=0;i<this.casemultipleSelection.length;i++)this.testcaseList.push({testscenenid:this.searchcase.testscenenid,scenename:this.searchcase.testscenenname,modelid:this.searchcase.modelid,modelname:this.searchcase.modelname,deployunitid:this.casemultipleSelection[i].deployunitid,apiid:this.casemultipleSelection[i].apiid,deployunitname:this.casemultipleSelection[i].deployunitname,apiname:this.casemultipleSelection[i].apiname,testcaseid:this.casemultipleSelection[i].id,caseorder:0,casename:this.casemultipleSelection[i].casename,creator:this.name,projectid:window.localStorage.getItem("pid")});(e=this.testcaseList,Object(d.a)({url:"/testscene/testcase/addcases",method:"post",data:e})).then(function(){t.addtestscenecasedialogFormVisible=!1,t.gettestscenecaseList(),t.$message.success("装载成功")}).catch(function(e){t.$message.error("装载失败")})}},showUpdatetestsceneDialog:function(e){this.dialogFormVisible=!0,this.dialogStatus="update",this.tmptestscene.id=this.testsceneList[e].id,this.tmptestscene.scenename=this.testsceneList[e].scenename,this.tmptestscene.usetype=this.testsceneList[e].usetype,this.tmptestscene.memo=this.testsceneList[e].memo,this.tmptestscene.creator=this.name,this.tmptestscene.projectid=window.localStorage.getItem("pid")},showUpdateapiconditionDialog:function(e){this.caseconditiondialogFormVisible=!0,this.apiconditiondialogStatus="update",this.tmpapicondition.id=this.apiconditioncaseList[e].id,this.tmpapicondition.subconditionname=this.apiconditioncaseList[e].subconditionname,this.tmpapicondition.deployunitname=this.apiconditioncaseList[e].deployunitname,this.tmpapicondition.apiname=this.apiconditioncaseList[e].apiname,this.tmpapicondition.casename=this.apiconditioncaseList[e].casename,this.tmpapicondition.modelname=this.apiconditioncaseList[e].modelname,this.tmpapicondition.memo=this.apiconditioncaseList[e].memo,this.tmpapicondition.creator=this.name,this.tmpapicondition.projectid=window.localStorage.getItem("pid")},updatetestscene:function(){var e=this;this.$refs.tmptestscene.validate(function(t){t&&Object(l.f)(e.tmptestscene).then(function(){e.$message.success("更新成功"),e.gettestsceneList(),e.dialogFormVisible=!1}).catch(function(t){e.$message.error("更新失败")})})},updateapicondition:function(){var e=this;this.$refs.tmpapicondition.validate(function(t){t&&Object(m.d)(e.tmpapicondition).then(function(){e.$message.success("更新成功"),e.getapiconditionList(),e.caseconditiondialogFormVisible=!1}).catch(function(t){e.$message.error("更新失败")})})},removetestscene:function(e){var t=this;this.$confirm("删除该测试场景？","警告",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var i=t.testsceneList[e].id;Object(l.d)(i).then(function(){t.$message.success("删除成功"),t.gettestsceneList()})}).catch(function(){t.$message.info("已取消删除")})},removecaseapicondition:function(e){var t=this;this.$confirm("删除该前置条件？","警告",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var i=t.apiconditioncaseList[e].id;Object(m.b)(i).then(function(){t.$message.success("删除成功"),t.getapiconditionList()})}).catch(function(){t.$message.info("已取消删除")})},removetestscenecase:function(e){var t=this;this.$confirm("删除该测试场景用例？","警告",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var i,n=t.testscenecaseList[e].id;(i=n,Object(d.a)({url:"/testscene/testcase/"+i,method:"delete"})).then(function(){t.$message.success("删除成功"),t.gettestscenecaseList()})}).catch(function(){t.$message.info("已取消删除")})},isUniqueDetail:function(e){for(var t=0;t<this.testsceneList.length;t++)if(this.testsceneList[t].id!==e.id&&this.testsceneList[t].scenename===e.scenename)return this.$message.error("测试场景名已存在"),!1;return!0},searchdeployunitmodel:function(e){var t=this;Object(u.c)(e).then(function(e){t.modelList=e.data.list}).catch(function(e){t.$message.error("加载服务模块列表失败")})},apiconditiondeployunitselectChanged:function(e){var t=this;this.tmpapicondition.casename=null,this.tmpapicondition.apiname=null,this.tmpapicondition.modelname=null;for(var i=0;i<this.deployunitList.length;i++)this.deployunitList[i].deployunitname===e&&(this.tmpapicondition.deployunitid=this.deployunitList[i].id);Object(u.c)(this.tmpapicondition).then(function(e){t.apiconditionmodelList=e.data.list}).catch(function(e){t.$message.error("加载服务模块列表失败")}),this.apiconditionapiList=null,Object(o.d)(this.tmpapicondition).then(function(e){t.apiconditionapiList=e.data}).catch(function(e){t.$message.error("加载api列表失败")})},apiconditionmodelselectChanged:function(e){var t=this;this.tmpapicondition.apiname=null,this.tmpapicondition.casename=null;for(var i=0;i<this.apiconditionmodelList.length;i++)this.apiconditionmodelList[i].modelname===e&&(this.tmpapicondition.modelid=this.apiconditionmodelList[i].id);""===e&&(this.tmpapicondition.modelid=0,this.tmpapicondition.modelname=""),Object(o.d)(this.tmpapicondition).then(function(e){t.apiconditionapiList=e.data}).catch(function(e){t.$message.error("加载api列表失败")})},deployunitselectChanged:function(e){var t=this;this.searchcase.modelid=0,this.searchcase.apiid=0,this.searchcase.deployunitid=0;for(var i=0;i<this.deployunitList.length;i++)this.deployunitList[i].deployunitname===e&&(this.searchcase.deployunitid=this.deployunitList[i].id);this.searchdeployunitmodel(this.searchcase),this.apiList=null,this.searchcase.apiname="",Object(o.d)(this.searchcase).then(function(e){t.apiList=e.data}).catch(function(e){t.$message.error("加载api列表失败")})},addcasedeployunitselectChanged:function(e){var t=this;this.addsearchcase.modelid=0,this.addsearchcase.apiid=0;for(var i=0;i<this.deployunitList.length;i++)this.deployunitList[i].deployunitname===e&&(this.addsearchcase.deployunitid=this.deployunitList[i].id);this.searchdeployunitmodel(this.addsearchcase),this.addcaseapiList=null,this.addsearchcase.apiname="",this.addsearchcase.deployunitname=e,console.log(2.222222222222222e44),Object(o.d)(this.addsearchcase).then(function(e){t.addcaseapiList=e.data}).catch(function(e){t.$message.error("加载api列表失败")})},modelselectChanged:function(e){var t=this;this.searchcase.modelid=0,this.searchcase.apiid=0;for(var i=0;i<this.modelList.length;i++)this.modelList[i].modelname===e&&(this.searchcase.modelid=this.modelList[i].id);this.apiList=null,this.searchcase.apiname="",Object(o.d)(this.caseQuery).then(function(e){t.apiList=e.data}).catch(function(e){t.$message.error("加载api列表失败")})},addcasemodelselectChanged:function(e){var t=this;this.addsearchcase.modelid=0,this.addsearchcase.apiid=0;for(var i=0;i<this.addcasemodelList.length;i++)this.addcasemodelList[i].modelname===e&&(this.addsearchcase.modelid=this.addcasemodelList[i].id);this.addcaseapiList=null,this.addsearchcase.apiname="",this.addsearchcase.deployunitname=e,Object(o.d)(this.addsearchcase).then(function(e){t.addcaseapiList=e.data}).catch(function(e){t.$message.error("加载api列表失败")})},ApiselectChanged:function(e){this.searchcase.apiid=0;for(var t=0;t<this.apiList.length;t++)this.apiList[t].apiname===e&&(this.searchcase.apiid=this.apiList[t].id)},apiconditionapiselectChanged:function(e){var t=this;this.tmpapicondition.casename=null;for(var i=0;i<this.apiconditionapiList.length;i++)this.apiconditionapiList[i].apiname===e&&(this.tmpapicondition.apiid=this.apiconditionapiList[i].id);Object(s.d)(this.tmpapicondition).then(function(e){t.apiconditioncaseList=e.data}).catch(function(e){t.$message.error("加载apicase列表失败")})},apiconditiontestcaseselectChanged:function(e){for(var t=0;t<this.apiconditioncaseList.length;t++)this.apiconditioncaseList[t].casename===e&&(this.tmpapicondition.caseid=this.apiconditioncaseList[t].id)},addcaseApiselectChanged:function(e){this.addsearchcase.apiid=0;for(var t=0;t<this.addcaseapiList.length;t++)this.addcaseapiList[t].apiname===e&&(this.addsearchcase.apiid=this.addcaseapiList[t].id)}}},y={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[e.hasPermission("testscene:list")?i("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return t.preventDefault(),e.gettestsceneList(t)}}},[e._v("刷新")]):e._e(),e._v(" "),e.hasPermission("testscene:add")?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return t.preventDefault(),e.showAddtestsceneDialog(t)}}},[e._v("添加测试场景")]):e._e(),e._v(" "),e.hasPermission("testscene:add")?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return t.preventDefault(),e.showCopytestsceneDialog(t)}}},[e._v("复制测试场景")]):e._e()],1),e._v(" "),e.hasPermission("testscene:search")?i("span",[i("el-form-item",[i("el-input",{attrs:{clearable:"",maxlength:"40",placeholder:"测试场景名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchBy(t)}},model:{value:e.search.scenename,callback:function(t){e.$set(e.search,"scenename",t)},expression:"search.scenename"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.searchBy}},[e._v("查询")])],1)],1):e._e()],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.itemKey,attrs:{data:e.testsceneList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.getIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"测试场景名",align:"center",prop:"scenename",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"类型",align:"center",prop:"usetype",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作人",align:"center",prop:"creator",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.unix2CurrentTime(t.row.createTime)))]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"最后修改时间",align:"center",prop:"lastmodifyTime",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.unix2CurrentTime(t.row.lastmodifyTime))+"\n        ")]}}])}),e._v(" "),e.hasPermission("testscene:update")||e.hasPermission("testscene:delete")?i("el-table-column",{attrs:{label:"管理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("testscene:update")&&t.row.id!==e.id?i("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showUpdatetestsceneDialog(t.$index)}}},[e._v("修改")]):e._e(),e._v(" "),e.hasPermission("testscene:delete")&&t.row.id!==e.id?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.removetestscene(t.$index)}}},[e._v("删除")]):e._e(),e._v(" "),e.hasPermission("testscene:loadcase")&&t.row.id!==e.id?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(i){return i.preventDefault(),e.showtestsceneCaseDialog(t.$index)}}},[e._v("装载用例")]):e._e()]}}],null,!1,3379998281)}):e._e()],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.search.page,"page-size":e.search.size,total:e.total,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"tmptestscene",staticClass:"small-space",staticStyle:{width:"400px","margin-left":"50px"},attrs:{"status-icon":"","label-position":"left","label-width":"120px",model:e.tmptestscene}},[i("el-form-item",{attrs:{label:"测试场景名",prop:"scenename",required:""}},[i("el-input",{attrs:{maxlength:"60",type:"text","prefix-icon":"el-icon-edit","auto-complete":"off"},model:{value:e.tmptestscene.scenename,callback:function(t){e.$set(e.tmptestscene,"scenename",t)},expression:"tmptestscene.scenename"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"场景类型",prop:"usetype",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"场景类型"},model:{value:e.tmptestscene.usetype,callback:function(t){e.$set(e.tmptestscene,"usetype",t)},expression:"tmptestscene.usetype"}},[i("el-option",{attrs:{label:"功能",value:"功能"}}),e._v(" "),i("el-option",{attrs:{label:"性能",value:"性能"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"memo"}},[i("el-input",{attrs:{maxlength:"60",type:"text","prefix-icon":"el-icon-message","auto-complete":"off"},model:{value:e.tmptestscene.memo,callback:function(t){e.$set(e.tmptestscene,"memo",t)},expression:"tmptestscene.memo"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"add"===e.dialogStatus?i("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return t.preventDefault(),e.$refs.tmptestscene.resetFields()}}},[e._v("重置")]):e._e(),e._v(" "),"add"===e.dialogStatus?i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.addtestscene(t)}}},[e._v("添加")]):e._e(),e._v(" "),"update"===e.dialogStatus?i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.updatetestscene(t)}}},[e._v("修改")]):e._e()],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"复制场景",visible:e.CopysceneFormVisible},on:{"update:visible":function(t){e.CopysceneFormVisible=t}}},[i("el-form",{ref:"tmpcopyscene",staticClass:"small-space",staticStyle:{width:"400px","margin-left":"50px"},attrs:{"status-icon":"","label-position":"left","label-width":"120px",model:e.tmpcopyscene}},[i("el-form-item",{attrs:{label:"源场景",prop:"sourcescenename",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"源场景"},on:{change:function(t){return e.CopySourceSceneChanged(t)}},model:{value:e.tmpcopyscene.sourcescenename,callback:function(t){e.$set(e.tmpcopyscene,"sourcescenename",t)},expression:"tmpcopyscene.sourcescenename"}},[i("el-option",{staticStyle:{display:"none"},attrs:{label:"请选择",value:"''"}}),e._v(" "),e._l(e.sourcetestsceneList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.scenename,value:e.scenename,required:""}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"新场景名",prop:"newscenename",required:""}},[i("el-input",{attrs:{type:"text",maxlength:"40","prefix-icon":"el-icon-edit","auto-complete":"off"},model:{value:e.tmpcopyscene.newscenename,callback:function(t){e.$set(e.tmpcopyscene,"newscenename",t)},expression:"tmpcopyscene.newscenename"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.CopysceneFormVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.copyscene(t)}}},[e._v("保存\n        ")])],1)],1),e._v(" "),i("el-dialog",{attrs:{width:"1000px",title:"场景用例",visible:e.testscenecasedialogFormVisible},on:{"update:visible":function(t){e.testscenecasedialogFormVisible=t}}},[i("div",{staticClass:"filter-container"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"微服务:",prop:"deployunitname"}},[i("el-select",{staticStyle:{width:"120px"},attrs:{filterable:"",placeholder:"微服务"},on:{change:function(t){return e.deployunitselectChanged(t)}},model:{value:e.searchcase.deployunitname,callback:function(t){e.$set(e.searchcase,"deployunitname",t)},expression:"searchcase.deployunitname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.deployunitList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.deployunitname,value:e.deployunitname}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"模块:",prop:"modelname"}},[i("el-select",{staticStyle:{width:"120px"},attrs:{filterable:"",placeholder:"模块"},on:{change:function(t){return e.modelselectChanged(t)}},model:{value:e.searchcase.modelname,callback:function(t){e.$set(e.searchcase,"modelname",t)},expression:"searchcase.modelname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.modelList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.modelname,value:e.modelname}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"API:"}},[i("el-select",{staticStyle:{width:"120px"},attrs:{filterable:"",placeholder:"api名"},on:{change:function(t){return e.ApiselectChanged(t)}},model:{value:e.searchcase.apiname,callback:function(t){e.$set(e.searchcase,"apiname",t)},expression:"searchcase.apiname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.apiList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.apiname,value:e.apiname}})],1)})],2)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.searchscenecaseBy}},[e._v("查询")])],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.ShowAddCaseDialog}},[e._v("装载用例")])],1)],1)],1),e._v(" "),i("el-table",{ref:"caseTable",attrs:{data:e.testscenecaseList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.scenecasegetIndex(t.$index))}})]}}])}),e._v(" "),e.show?i("el-table-column",{attrs:{label:"apiid",align:"center",prop:"apiid",width:"150"}}):e._e(),e._v(" "),e.show?i("el-table-column",{attrs:{label:"deployunitid",align:"center",prop:"deployunitid",width:"150"}}):e._e(),e._v(" "),i("el-table-column",{attrs:{label:"用例名",align:"center",prop:"casename",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"微服务",align:"center",prop:"deployunitname",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"API",align:"center",prop:"apiname",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{width:"120",align:"center",label:"用例顺序"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.edit?[i("el-input",{staticClass:"edit-input",attrs:{oninput:"value=value.replace(/[^\\d]/g,'')",maxLength:"10",size:"small"},model:{value:n.caseorder,callback:function(t){e.$set(n,"caseorder",t)},expression:"row.caseorder"}}),e._v(" "),i("el-button",{staticClass:"cancel-btn",attrs:{size:"small",icon:"el-icon-refresh",type:"warning"},on:{click:function(t){return e.cancelEdit(n)}}},[e._v("\n                取消\n              ")])]:i("span",[e._v(e._s(n.caseorder))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.edit?i("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(t){return e.confirmEdit(n)}}},[e._v("\n              保存\n            ")]):i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){n.edit=!n.edit}}},[e._v("\n              设置顺序\n            ")])]}}])}),e._v(" "),e.hasPermission("testscene:deletecase")||e.hasPermission("testscene:scenecondition")?i("el-table-column",{attrs:{label:"管理",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("testscene:deletecase")&&t.row.id!==e.id?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.removetestscenecase(t.$index)}}},[e._v("删除")]):e._e(),e._v(" "),e.hasPermission("testscene:scenecondition")&&t.row.id!==e.id?i("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showtestscenecaseConditionDialog(t.$index)}}},[e._v("前置条件")]):e._e()]}}],null,!1,1326302761)}):e._e()],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.searchcase.page,"page-size":e.searchcase.size,total:e.casetotal,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.casehandleSizeChange,"current-change":e.casehandleCurrentChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:"场景前置条件",visible:e.sceneConditionFormVisible},on:{"update:visible":function(t){e.sceneConditionFormVisible=t}}},[i("div",{staticClass:"filter-container"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[e.hasPermission("executeplan:add")?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return t.preventDefault(),e.showAddapiparamsDialog(t)}}},[e._v("添加前置接口")]):e._e(),e._v(" "),e.hasPermission("executeplan:add")?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return t.preventDefault(),e.showAddapiparamsDialog(t)}}},[e._v("添加前置数据库")]):e._e(),e._v(" "),e.hasPermission("executeplan:add")?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return t.preventDefault(),e.showAddapiparamsDialog(t)}}},[e._v("添加前置脚本")]):e._e(),e._v(" "),e.hasPermission("executeplan:add")?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return t.preventDefault(),e.showAddapiparamsDialog(t)}}},[e._v("添加前置延时")]):e._e()],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.itemKey,attrs:{data:e.paramsList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"45"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.paramgetIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"Header",align:"center",prop:"globalheadername",width:"280"}}),e._v(" "),e.hasPermission("executeplan:update")||e.hasPermission("executeplan:delete")?i("el-table-column",{attrs:{label:"管理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("executeplan:update")&&t.row.id!==e.id?i("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showUpdateparamsDialog(t.$index)}}},[e._v("修改")]):e._e(),e._v(" "),e.hasPermission("executeplan:delete")&&t.row.id!==e.id?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.removeexecuteplanparam(t.$index)}}},[e._v("删除")]):e._e()]}}],null,!1,2267587065)}):e._e()],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.itemKey,attrs:{data:e.paramsList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"45"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.paramgetIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"Header",align:"center",prop:"globalheadername",width:"280"}}),e._v(" "),e.hasPermission("executeplan:update")||e.hasPermission("executeplan:delete")?i("el-table-column",{attrs:{label:"管理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("executeplan:update")&&t.row.id!==e.id?i("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showUpdateparamsDialog(t.$index)}}},[e._v("修改")]):e._e(),e._v(" "),e.hasPermission("executeplan:delete")&&t.row.id!==e.id?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.removeexecuteplanparam(t.$index)}}},[e._v("删除")]):e._e()]}}],null,!1,2267587065)}):e._e()],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.itemKey,attrs:{data:e.paramsList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"45"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.paramgetIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"Header",align:"center",prop:"globalheadername",width:"280"}}),e._v(" "),e.hasPermission("executeplan:update")||e.hasPermission("executeplan:delete")?i("el-table-column",{attrs:{label:"管理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("executeplan:update")&&t.row.id!==e.id?i("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showUpdateparamsDialog(t.$index)}}},[e._v("修改")]):e._e(),e._v(" "),e.hasPermission("executeplan:delete")&&t.row.id!==e.id?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.removeexecuteplanparam(t.$index)}}},[e._v("删除")]):e._e()]}}],null,!1,2267587065)}):e._e()],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.itemKey,attrs:{data:e.paramsList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"45"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.paramgetIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"Header",align:"center",prop:"globalheadername",width:"280"}}),e._v(" "),e.hasPermission("executeplan:update")||e.hasPermission("executeplan:delete")?i("el-table-column",{attrs:{label:"管理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("executeplan:update")&&t.row.id!==e.id?i("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showUpdateparamsDialog(t.$index)}}},[e._v("修改")]):e._e(),e._v(" "),e.hasPermission("executeplan:delete")&&t.row.id!==e.id?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.removeexecuteplanparam(t.$index)}}},[e._v("删除")]):e._e()]}}],null,!1,2267587065)}):e._e()],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"用例前置条件",visible:e.scenecaseConditionFormVisible},on:{"update:visible":function(t){e.scenecaseConditionFormVisible=t}}},[i("div",{staticClass:"filter-container"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[e.hasPermission("testscene:scenecasecondition")?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return t.preventDefault(),e.ShowAddcasecaseconditionDialog(t)}}},[e._v("添加前置接口")]):e._e(),e._v(" "),e.hasPermission("testscene:scenecasecondition")?i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return t.preventDefault(),e.showAddapidelayDialog(t)}}},[e._v("添加前置延时")]):e._e()],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.apiconditioncaseList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"45"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.apiconditioncaseIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"前置条件名",align:"center",prop:"subconditionname",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"前置接口",align:"center",prop:"casename",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"所属用例",align:"center",prop:"conditionname",width:"150"}}),e._v(" "),e.hasPermission("testscene:caseupdateapicondition")||e.hasPermission("testscene:casedeleteapicondition")?i("el-table-column",{attrs:{label:"管理",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("testscene:caseupdateapicondition")&&t.row.id!==e.id?i("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.showUpdateapiconditionDialog(t.$index)}}},[e._v("修改")]):e._e(),e._v(" "),e.hasPermission("testscene:casedeleteapicondition")&&t.row.id!==e.id?i("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(i){return i.preventDefault(),e.removecaseapicondition(t.$index)}}},[e._v("删除")]):e._e()]}}],null,!1,3600714770)}):e._e()],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.apiconditiontextMap[e.apiconditiondialogStatus],visible:e.caseconditiondialogFormVisible},on:{"update:visible":function(t){e.caseconditiondialogFormVisible=t}}},[i("el-form",{ref:"tmpapicondition",staticClass:"small-space",staticStyle:{width:"450px","margin-left":"50px"},attrs:{"status-icon":"","label-position":"left","label-width":"120px",model:e.tmpapicondition}},[i("el-form-item",{attrs:{label:"前置条件名",prop:"subconditionname",required:""}},[i("el-input",{attrs:{type:"text",maxlength:"30","prefix-icon":"el-icon-edit","auto-complete":"off"},model:{value:e.tmpapicondition.subconditionname,callback:function(t){e.$set(e.tmpapicondition,"subconditionname",t)},expression:"tmpapicondition.subconditionname"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"微服务",prop:"deployunitname",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"微服务"},on:{change:function(t){return e.apiconditiondeployunitselectChanged(t)}},model:{value:e.tmpapicondition.deployunitname,callback:function(t){e.$set(e.tmpapicondition,"deployunitname",t)},expression:"tmpapicondition.deployunitname"}},[i("el-option",{staticStyle:{display:"none"},attrs:{label:"请选择",value:"''"}}),e._v(" "),e._l(e.deployunitList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.deployunitname,value:e.deployunitname,required:""}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"模块:",prop:"modelname"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"模块"},on:{change:function(t){return e.apiconditionmodelselectChanged(t)}},model:{value:e.tmpapicondition.modelname,callback:function(t){e.$set(e.tmpapicondition,"modelname",t)},expression:"tmpapicondition.modelname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.apiconditionmodelList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.modelname,value:e.modelname}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"API",prop:"apiname",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"API"},on:{change:function(t){return e.apiconditionapiselectChanged(t)}},model:{value:e.tmpapicondition.apiname,callback:function(t){e.$set(e.tmpapicondition,"apiname",t)},expression:"tmpapicondition.apiname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.apiconditionapiList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.apiname,value:e.apiname}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"接口",prop:"casename",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"接口"},on:{change:function(t){return e.apiconditiontestcaseselectChanged(t)}},model:{value:e.tmpapicondition.casename,callback:function(t){e.$set(e.tmpapicondition,"casename",t)},expression:"tmpapicondition.casename"}},[i("el-option",{staticStyle:{display:"none"},attrs:{label:"请选择",value:"''"}}),e._v(" "),e._l(e.apiconditioncaseList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.casename,value:e.casename,required:""}})],1)})],2)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.caseconditiondialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"add"===e.apiconditiondialogStatus?i("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return t.preventDefault(),e.$refs.tmpapicondition.resetFields()}}},[e._v("重置")]):e._e(),e._v(" "),"add"===e.apiconditiondialogStatus?i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.addapicondition(t)}}},[e._v("添加")]):e._e(),e._v(" "),"update"===e.apiconditiondialogStatus?i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.updateapicondition(t)}}},[e._v("修改")]):e._e()],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"前置数据库",visible:e.dbconditiondialogFormVisible},on:{"update:visible":function(t){e.dbconditiondialogFormVisible=t}}},[i("el-form",{ref:"tmpdbcondition",staticClass:"small-space",staticStyle:{width:"600px","margin-left":"30px"},attrs:{"status-icon":"","label-position":"left","label-width":"120px",model:e.tmpdbcondition}},[i("el-form-item",{attrs:{label:"数据库条件名：",prop:"subconditionname",required:""}},[i("el-input",{attrs:{type:"text",maxlength:"30","prefix-icon":"el-icon-edit","auto-complete":"off"},model:{value:e.tmpdbcondition.subconditionname,callback:function(t){e.$set(e.tmpdbcondition,"subconditionname",t)},expression:"tmpdbcondition.subconditionname"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"环境：",prop:"enviromentname",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"环境"},on:{change:function(t){return e.selectChangedEN(t)}},model:{value:e.tmpdbcondition.enviromentname,callback:function(t){e.$set(e.tmpdbcondition,"enviromentname",t)},expression:"tmpdbcondition.enviromentname"}},[i("el-option",{staticStyle:{display:"none"},attrs:{label:"请选择",value:"''"}}),e._v(" "),e._l(e.enviromentnameList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.enviromentname,value:e.enviromentname,required:""}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"组件：",prop:"assemblename",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"组件"},on:{change:function(t){return e.ConditionselectChangedAS(t)}},model:{value:e.tmpdbcondition.assemblename,callback:function(t){e.$set(e.tmpdbcondition,"assemblename",t)},expression:"tmpdbcondition.assemblename"}},[i("el-option",{staticStyle:{display:"none"},attrs:{label:"请选择",value:"''"}}),e._v(" "),e._l(e.enviroment_assembleList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.assemblename,value:e.assemblename,required:""}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"操作类型：",prop:"dbtype",required:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"操作类型"},on:{change:function(t){return e.selectChangedDBType(t)}},model:{value:e.tmpdbcondition.dbtype,callback:function(t){e.$set(e.tmpdbcondition,"dbtype",t)},expression:"tmpdbcondition.dbtype"}},[i("el-option",{attrs:{label:"新增",value:"Insert"}}),e._v(" "),i("el-option",{attrs:{label:"删除",value:"Delete"}}),e._v(" "),i("el-option",{attrs:{label:"修改",value:"Update"}}),e._v(" "),i("el-option",{attrs:{label:"查询",value:"Select"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"Sql语句：",prop:"dbcontent",required:""}},[i("el-input",{attrs:{type:"textarea",rows:"10",cols:"50",maxlength:"2000","prefix-icon":"el-icon-edit","auto-complete":"off"},model:{value:e.tmpdbcondition.dbcontent,callback:function(t){e.$set(e.tmpdbcondition,"dbcontent",t)},expression:"tmpdbcondition.dbcontent"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"add"===e.dialogStatus?i("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return t.preventDefault(),e.$refs.tmpdbcondition.resetFields()}}},[e._v("重置")]):e._e(),e._v(" "),"add"===e.dialogStatus?i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.adddbcondition(t)}}},[e._v("添加")]):e._e(),e._v(" "),"update"===e.dialogStatus?i("el-button",{attrs:{type:"success",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.updatedbcondition(t)}}},[e._v("修改")]):e._e()],1)],1),e._v(" "),i("el-dialog",{attrs:{width:"900px",title:"添加用例",visible:e.addtestscenecasedialogFormVisible},on:{"update:visible":function(t){e.addtestscenecasedialogFormVisible=t}}},[i("div",{staticClass:"filter-container"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"微服务:",prop:"deployunitname"}},[i("el-select",{staticStyle:{width:"120px"},attrs:{filterable:"",placeholder:"微服务"},on:{change:function(t){return e.addcasedeployunitselectChanged(t)}},model:{value:e.addsearchcase.deployunitname,callback:function(t){e.$set(e.addsearchcase,"deployunitname",t)},expression:"addsearchcase.deployunitname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.deployunitList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.deployunitname,value:e.deployunitname}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"模块:",prop:"modelname"}},[i("el-select",{staticStyle:{width:"120px"},attrs:{filterable:"",placeholder:"模块"},on:{change:function(t){return e.addcasemodelselectChanged(t)}},model:{value:e.addsearchcase.modelname,callback:function(t){e.$set(e.addsearchcase,"modelname",t)},expression:"addsearchcase.modelname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.modelList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.modelname,value:e.modelname}})],1)})],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"API:"}},[i("el-select",{staticStyle:{width:"120px"},attrs:{filterable:"",placeholder:"api名"},on:{change:function(t){return e.addcaseApiselectChanged(t)}},model:{value:e.addsearchcase.apiname,callback:function(t){e.$set(e.addsearchcase,"apiname",t)},expression:"addsearchcase.apiname"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.addcaseapiList,function(e,t){return i("div",{key:t},[i("el-option",{attrs:{label:e.apiname,value:e.apiname}})],1)})],2)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.searchaddcaseBy}},[e._v("查询")])],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.addcaselistLoading,expression:"addcaselistLoading",modifiers:{body:!0}}],key:e.itemaddcaseKey,ref:"addcaseTable",attrs:{data:e.addtestcaselastList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""},on:{"row-click":e.addcasehandleClickTableRow,"selection-change":e.addcasehandleSelectionChange}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.sceneaddcasegetIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{type:"selection",prop:"status",width:"50"}}),e._v(" "),e.show?i("el-table-column",{attrs:{label:"apiid",align:"center",prop:"apiid",width:"120"}}):e._e(),e._v(" "),e.show?i("el-table-column",{attrs:{label:"deployunitid",align:"center",prop:"deployunitid",width:"120"}}):e._e(),e._v(" "),i("el-table-column",{attrs:{label:"用例名",align:"center",prop:"casename",width:"280"}}),e._v(" "),i("el-table-column",{attrs:{label:"微服务",align:"center",prop:"deployunitname",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{label:"API",align:"center",prop:"apiname",width:"280"}})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.addsearchcase.page,"page-size":e.addsearchcase.size,total:e.addcasetotal,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.addcasehandleSizeChange,"current-change":e.addcasehandleCurrentChange}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.addtestscenecasedialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",loading:e.btnLoading},nativeOn:{click:function(t){return t.preventDefault(),e.addtestscenetestcase(t)}}},[e._v("添加")])],1)],1)],1)},staticRenderFns:[]},_=i("VU/8")(v,y,!1,null,null,null);t.default=_.exports}});
//# sourceMappingURL=27.c4bb476bc81685e8acfc.js.map